<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--
                              _.._        ,------------.
                           ,'      `.    ( We want you! )
                          /  __) __` \    `-,----------'
                         (  (`-`(-')  ) _.-'
                         /)  \  = /  (
                        /'    |--' .  \
                       (  ,---|  `-.)__`
                        )(  `-.,--'   _`-.
                       '/,'          (  Uu",
                        (_       ,    `/,-' )
                        `.__,  : `-'/  /`--'
                          |     `--'  |
                          `   `-._   /
                           \        (
                           /\ .      \.  freebuf
                          / |` \     ,-\
                         /  \| .)   /   \
                        ( ,'|\    ,'     :
                        | \,`.`--"/      }
                        `,'    \  |,'    /
                       / "-._   `-/      |
                       "-.   "-.,'|     ;
                      /        _/["---'""]
                     :        /  |"-     '
                     '           |      /
                                 `      |
-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  深入解读MS14-068漏洞：微软精心策划的后门？ - FreeBuf.COM | 关注黑客与极客</title>
<meta name="description" content="0&#215;0&nbsp;背景
初次认识该漏洞是在FreeBuf上对该漏洞的预警《漏洞预警：系统权限提升漏洞（CVE-2014-6324）影响全版本Windows服务器》：
微软今天（2014-11-18）发布了一个紧急补丁，修复了一个影响全部版本Wi…" />
<meta name="keywords" content="Kerberos, MS14-068, 最新漏洞报告,漏洞众测平台,漏洞攻击分析,漏洞POC和EXP, 系统安全解决方案,系统安全软件排行,系统安全技术, 网络安全大事件点评,安全圈最新资讯,关于安全的那些事" />
<meta name="baidu-site-verification" content="nKKKqQxp6R" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="renderer" content="webkit">
<meta property="qc:admins" content="6620477777662552566375" />
<link rel='stylesheet' id='wpfp-css' href='http://www.freebuf.com/buf/plugins/wp-favorite-posts/wpfp.css' type='text/css' />
<link rel='stylesheet' id='wp-recentcomments-css'  href='http://static.3001.net/css/recentcomments/wp-recentcomments.css?ver=2.2.3' type='text/css' media='screen' />
<link rel='stylesheet' id='mycred-widget-css'  href='http://www.freebuf.com/buf/plugins/gold/assets/css/widget.css?ver=1.3.2.1' type='text/css' media='all' />
<script type='text/javascript' src='http://static.3001.net/js/header/jquery.min.js?ver=3.6.1'></script>
<script type='text/javascript' src='http://www.freebuf.com/buf/plugins/wp-favorite-posts/wpfp.js?ver=3.6.1'></script>
<link rel='prev' title='CNN：黑了索尼的朝鲜黑客藏在中国沈阳' href='http://www.freebuf.com/news/56106.html' />
<link rel='next' title='Arp欺骗原理及Android环境下的检测方法' href='http://www.freebuf.com/articles/terminal/55987.html' />
<link rel='canonical' href='http://www.freebuf.com/vuls/56081.html' />
<link rel='shortlink' href='http://www.freebuf.com/?p=56081' />

<link rel="stylesheet" href="http://static.3001.net/css/highslide/highslide.css" type="text/css" />
<script type="text/javascript" src="http://static.3001.net/js/highslide/highslide-with-html.packed.js"></script>
<script type="text/javascript">
jQuery(document).ready(function($) {
    hs.graphicsDir = "http://www.freebuf.com/buf/plugins/auto-highslide/images/graphics/";
    hs.outlineType = "rounded-white";
    hs.dimmingOpacity = 0.8;
    hs.outlineWhileAnimating = true;
    hs.showCredits = false;
    hs.captionEval = "this.thumb.alt";
    hs.numberPosition = "caption";
    hs.align = "center";
    hs.transitions = ["expand", "crossfade"];
    hs.addSlideshow({
        interval: 5000,
        repeat: true,
        useControls: true,
        fixedControls: "fit",
        overlayOptions: {
            opacity: 0.75,
            position: "bottom center",
            hideOnMouseOut: true

        }

    });
});
</script>
          <script language="JavaScript" type="text/javascript" src="http://www.freebuf.com/buf/plugins/cartpauj-pm/js/script.js"></script>
      <link rel="stylesheet" type="text/css" href="http://www.freebuf.com/buf/plugins/cartpauj-pm/style/style.css" />
      <script type="text/javascript" src="http://www.freebuf.com/buf/plugins/simditor/highlight/highlight.pack.js"></script><link type="text/css" rel="stylesheet" href=" http://www.freebuf.com/buf/plugins/simditor/highlight/styles/default.css" />	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
<link rel="shortcut icon" href="http://static.freebuf.com/images/favicon.ico" />
<link rel="stylesheet" href="http://static.3001.net/css/new/header.css" />
<link href="http://static.3001.net/css/new/bootstrap.min.css?ver=2016051701" rel="stylesheet" media="screen">
    <!--轮播图-->
    <link href="http://static.3001.net/css/new/swiper-3.4.2.min.css" rel="stylesheet" type="text/css">
    <link href="http://static.3001.net/css/new/style.css?ver=20170912568" rel="stylesheet" type="text/css">
    <style type="text/css">
#contenttxt hr {
  display: block;
  height: 0px;
  border: 0;
  border-top: 1px solid #ccc;
  margin: 15px 0;
  padding: 0;
}
#contenttxt table {
  width: 100%;
  table-layout: fixed;
  border-collapse: collapse;
  border-spacing: 0;
  margin: 15px 0;
}
#contenttxt table thead {
  background-color: #f9f9f9;
}
#contenttxt table td, #contenttxt table th {
  min-width: 40px;
  height: 30px;
  border: 1px solid #ccc;
  vertical-align: top;
  padding: 2px 4px;
  text-align: left;
  box-sizing: border-box;
  white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;
}
#contenttxt table td.active, #contenttxt table th.active {
  background-color: #ffffee;
  white-space: pre-wrap; white-space: -moz-pre-wrap; white-space: -pre-wrap; white-space: -o-pre-wrap; word-wrap: break-word;
}
</style>
<script src="http://www.freebuf.com/buf/themes/freebuf/js/jquery-2.0.3.min.js"></script>
<script src="http://www.freebuf.com/buf/themes/freebuf/js/bootstrap.min.js"></script>
<script src="http://www.freebuf.com/buf/themes/freebuf/js/slider.js?2016022501.1" type="text/javascript"></script>
<script src="http://www.freebuf.com/buf/themes/freebuf/js/jquery.sticky.js" type="text/javascript"></script>
<script src="http://static.3001.net/js/focus/bjqs-1.3.min.js" type="text/javascript" ></script>
<script src="http://www.freebuf.com/buf/themes/freebuf/js/mosaic.1.0.1.min.js" type="text/javascript" ></script>
<script type="text/javascript" src="http://static.3001.net/js/new/setint.js"></script>
    <!--轮播图-->
    <script src="http://static.3001.net/js/colum/swiper-3.4.2.min.js"></script>
<!--[if lt IE 9]>
    <script src="http://www.freebuf.com/buf/themes/freebuf/js/html5shiv.min.js"></script>
    <script src="http://www.freebuf.com/buf/themes/freebuf/js/respond.min.js"></script>
<![endif]-->
    <style>
        @font-face {font-family: 'iconfont';
            src: url('http://static.3001.net/iconfont/iconfont.eot'); /* IE9*/
            src: url('http://static.3001.net/iconfont/iconfont.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
            url('http://static.3001.net/iconfont/iconfont.woff') format('woff'), /* chrome、firefox */
            url('http://static.3001.net/iconfont/iconfonticonfont.ttf') format('truetype'), /* chrome、firefox、opera、Safari, Android, iOS 4.2+*/
            url('http://static.3001.net/iconfont/iconfont.svg#iconfont') format('svg'); /* iOS 4.1- */
        }
    </style>
</head>

<body>
<!----------header---------->
<!--头部导航-->
<div id="undefined-sticky-wrapper" class="sticky-wrapper is-sticky">
    <div class="main-header">
        <div class="header">
            <div class="header-container clearfix">
                                <div class="header-logo"><a href="http://www.freebuf.com"></a></div>
                                        <!-- column -->
                        <div class="nav">
                            <ul class="nav-child clearfix">
                                <li class=" index">
                                    <a href="http://www.freebuf.com">首页</a></li>
                                <li data-value="read-menu">
                                    <a href="#">分类阅读<b class="triangle-down triangle-down-04"></b></a>
                                </li>
                                <li data-value="wenku-menu"><a href="javascript:;" target="_blank">文库<b class="triangle-down triangle-down-04"></b></a></li>
                                <li>
                                    <a href="http://zhuanlan.freebuf.com" target="_blank">专栏</a><b class="icon-betr"></b>
                                </li>
                                <li><a href="http://open.freebuf.com" target="_blank">公开课</a></li>
                                <li><a href="http://shop.freebuf.com" target="_blank">商城</a></li>
                                <li data-value="company-menu"><a href="javascript:;" >企业服务<b class="triangle-down triangle-down-04"></b></a></li>
                                <li data-value="user-menu"><a href="javascript:;" >用户服务<b class="triangle-down triangle-down-04"></b></a></li>
                            </ul>
                        </div>
                                        <div class="header-right">
                                    <div class="loginSign login-before">
                        <a href="https://account.tophant.com/register.html" class="login-btn">注册</a>
                        |
                        <a href="http://www.freebuf.com/oauth" class="sign-btn">登录</a>
                    </div>
                                    <!--搜索-->
                    <div class="search-form-inner clearfix">
                        <i class="searchdisplayico"></i>
                        <div class="form-group has-active search-col search-form-text">
                            <form id="hpsform-new" class="navbar-search navbar-form" onsubmit="return dispatch();">
                                <div class="form-group">
                                    <input id="bigq" class="input form-control" type="text" placeholder="关键字查找" autocomplete="off" title="关键字查找" name="q">
                                    <button class="submit" type="submit"></button>
                                </div>
                            </form>
                        </div>
                    </div>
                    <!--<script>
                        $('.search-form-inner .searchdisplayico').click(function(event) {
                            var evt = evt || event;
                            evt.stopPropagation();
                            $(this).siblings('.search-col').addClass('active');
                        });
                        $('.search-form-inner .search-col').click(function(event) {
                            var evt = evt || event;
                            evt.stopPropagation();
                            $('.search-form-inner .search-col').addClass('active');
                        });
                        $(document).click(function() {
                            $('.search-form-inner .search-col').removeClass('active');
                        });
                    </script>-->
                                    <div class="btn-publish">
                        <a href="#">投稿</a>
                        <div class="btn-publish-child">
                            <ul class="btn-child clearfix">
                                <li><a href="http://my.freebuf.com/post/edit/" target="_blank">文章撰写</a></li>
                                <li><hr/></li>
                                <li><a href="http://my.freebuf.com/post/article/" target="_blank">投稿管理</a></li>
                                                        </ul>
                        </div>
                    </div>
                </div>
                <div class="nav-small">
                    <a href="#">&#xe634;</a>
                    <ul class="nav-child clearfix">
                                                        <li class=" index">
                                    <a href="http://www.freebuf.com">首页</a></li>
                                <li class="read-classify">
                                    <a href="#">分类阅读<b class="icon-arrow"></b></a>
                                    <ul class="nav-child2 read-classify clearfix">
                                        <li>
                                            <strong>黑客</strong>
                                            <div class="nav-item">
                                                <a href="http://www.freebuf.com/vuls" target="_blank">漏洞</a>
                                                <a href="http://www.freebuf.com/sectool" target="_blank">安全工具</a>
                                                <a href="http://www.freebuf.com/articles/web" target="_blank">WEB安全</a>
                                                <a href="http://www.freebuf.com/articles/system" target="_blank">系统安全</a>
                                                <a href="http://www.freebuf.com/articles/network" target="_blank">网络安全</a>
                                                <a href="http://www.freebuf.com/articles/wireless" target="_blank">无线安全</a>
                                                <a href="http://www.freebuf.com/articles/terminal" target="_blank">设备/客户端安全</a>
                                                <a href="http://www.freebuf.com/articles/database" target="_blank">数据库安全</a>
                                                <a href="http://www.freebuf.com/articles/security-management" target="_blank">安全管理</a>
                                                <a href="http://www.freebuf.com/articles/es" target="_blank">企业安全</a>
                                                <a href="http://www.freebuf.com/ics-articles" target="_blank">工控安全</a>
                                            </div>
                                        </li>
                                        <li>
                                            <strong>极客</strong>
                                            <div class="nav-item">
                                                <a href="http://www.freebuf.com/geek" target="_blank">极客有意思</a>
                                                <a href="http://www.freebuf.com/news/others" target="_blank">周边</a>
                                            </div>
                                        </li>
                                        <li>
                                            <strong>特色</strong>
                                            <div class="nav-item">
                                                <a href="http://www.freebuf.com/news/special" target="_blank">头条</a>
                                                <a href="http://www.freebuf.com/articles/people" target="_blank">人物志</a>
                                                <a href="http://www.freebuf.com/fevents" target="_blank">活动</a>
                                                <a href="http://www.freebuf.com/video" target="_blank">视频</a>
                                                <a href="http://www.freebuf.com/articles/neopoints" target="_blank">观点</a>
                                                <a href="http://www.freebuf.com/jobs" target="_blank">招聘</a>
                                                <a href="http://www.freebuf.com/paper/" target="_blank">报告</a>
                                            </div>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="http://zhuanlan.freebuf.com/" target="_blank">专栏</a></li>
                                <li><a href="http://open.freebuf.com" target="_blank">公开课</a></li>
                                <li><a href="http://shop.freebuf.com" target="_blank">商城</a></li>
                                <li>
                                    <a href="javascript:;" target="_blank">企业服务<b class="icon-arrow"></b></a>
                                    <ul class="nav-child2">
                                        <li>
                                            <a href="https://www.vulbox.com/bounties/item-9-0-1" target="_blank"><strong>企业SRC</strong></a>
                                        </li>
                                        <li>
                                            <a href="http://company.freebuf.com" target="_blank"><strong>企业空间</strong></a>
                                        </li>
                                        <li>
                                            <a href="https://www.vulbox.com/" target="_blank"><strong>安全测试</strong></a>
                                        </li>
                                        <li>
                                            <a href="https://www.riskivy.com/" target="_blank"><strong>风险感知</strong></a>
                                        </li>

                                    </ul>
                                </li>
                                <li>
                                    <a href="javascript:;" target="_blank">用户服务<b class="icon-arrow"></b></a>
                                    <ul class="nav-child2">
                                        <li>
                                            <a href="http://www.freebuf.com/newsend" target="_blank"><strong>有奖投稿</strong></a>
                                        </li>
                                        <li>
                                            <a href="http://zhuanlan.freebuf.com" target="_blank">
                                        </li>
                                        <li>
                                            <a href="https://www.vulbox.com/bounties/detail-72" target="_blank"><strong>提交漏洞</strong></a>
                                        </li>
                                        <li class="last">
                                            <a href="https://www.vulbox.com/bounties" target="_blank"><strong>参与众测</strong></a>
                                        </li>
                                    </ul>
                                </li>
                                <li>
                                    <a href="javascript:;" target="_blank">文库<b class="icon-arrow"></b></a>
                                    <ul class="nav-child2">
                                        <li>
                                            <a href="http://www.freebuf.com/wenku" target="_blank"><strong>文库</strong></a>
                                        </li>
                                        <li>
                                            <a href="http://www.freebuf.com/special-subject" target="_blank"><strong>专题</strong></a>
                                        </li>
                                    </ul>
                                </li>
                                                    <li><a href="http://my.freebuf.com/post/edit" target="_blank">投稿</a></li>
                                                    <li><a href="https://account.tophant.com/register.html" class="login-btn">注册</a>
                            </li>
                            <li><a href="http://www.freebuf.com/oauth" class="sign-btn">登录</a></li>
                                            </ul>
                </div>
            </div>
            <div class="dropdown-menu read-menu" id="read-menu">
                <div class="container">
                    <ul class="menu clearfix">
                        <li>
                            <strong>黑客</strong>
                            <div class="nav-item">
                                <a href="http://www.freebuf.com/vuls" target="_blank">漏洞</a>
                                <a href="http://www.freebuf.com/sectool" target="_blank">安全工具</a>
                                <a href="http://www.freebuf.com/articles/web" target="_blank">WEB安全</a>
                                <a href="http://www.freebuf.com/articles/system" target="_blank">系统安全</a>
                                <a href="http://www.freebuf.com/articles/network" target="_blank">网络安全</a>
                                <a href="http://www.freebuf.com/articles/wireless" target="_blank">无线安全</a>
                                <a href="http://www.freebuf.com/articles/terminal" target="_blank">设备/客户端安全</a>
                                <a href="http://www.freebuf.com/articles/database" target="_blank">数据库安全</a>
                                <a href="http://www.freebuf.com/articles/security-management" target="_blank">安全管理</a>
                                <a href="http://www.freebuf.com/articles/es" target="_blank">企业安全</a>
                                <a class="last" href="http://www.freebuf.com/ics-articles" target="_blank">工控安全</a>
                            </div>
                        </li>
                        <li>
                            <strong>极客</strong>
                            <div class="nav-item">
                                <a href="http://www.freebuf.com/geek" target="_blank">极客有意思</a>
                                <a class="last" href="http://www.freebuf.com/news/others" target="_blank">周边</a>
                            </div>
                        </li>
                        <li>
                            <strong>特色</strong>
                            <div class="nav-item">
                                <a href="http://www.freebuf.com/news/special" target="_blank">头条</a>
                                <a href="http://www.freebuf.com/articles/people" target="_blank">人物志</a>
                                <a href="http://www.freebuf.com/fevents" target="_blank">活动</a>
                                <a href="http://www.freebuf.com/video" target="_blank">视频</a>
                                <a href="http://www.freebuf.com/articles/neopoints" target="_blank">观点</a>
                                <a href="http://www.freebuf.com/jobs" target="_blank">招聘</a>
                                <a class="last" href="http://www.freebuf.com/paper/" target="_blank">报告</a>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="dropdown-menu company-menu" id="company-menu">
                <div class="container">
                    <ul class="menu">
                        <li>
                            <a href="https://www.vulbox.com/bounties/item-9-0-1" target="_blank">
                                <span class="img"><img src="http://image.3001.net/images/header/icon-src.png"></span>
                                <span class="name">企业SRC</span>
                                <span class="intro">全/半托管式互联网漏洞收集管理</span>
                            </a>
                        </li>
                        <li>
                            <a href="http://company.freebuf.com" target="_blank">
                                <span class="img"><img src="http://image.3001.net/images/header/icon-company.png"></span>
                                <span class="name">企业空间</span>
                                <span class="intro">为企业定制信息安全专属门户</span>
                            </a>
                        </li>
                        <li>
                            <a href="https://www.vulbox.com/" target="_blank">
                                <span class="img"><img src="http://image.3001.net/images/header/icon-safety.png"></span>
                                <span class="name">安全测试</span>
                                <span class="intro">国内领先的互联网安全众测服务</span>
                            </a>
                        </li>
                        <li class="last">
                            <a href="https://www.riskivy.com/" target="_blank">
                                <span class="img"><img src="http://image.3001.net/images/header/icon-risk.png"></span>
                                <span class="name">风险感知</span>
                                <span class="intro">基于IT资产的自动化安全监控</span>
                            </a>
                        </li>

                    </ul>
                </div>
            </div>
            <div class="dropdown-menu user-menu" id="user-menu">
                <div class="container">
                    <ul class="menu">
                        <li>
                            <a href="http://www.freebuf.com/newsend" target="_blank">
                                <span class="img"><img src="http://image.3001.net/images/header/icon-write.png"></span>
                                <span class="name">有奖投稿</span>
                                <span class="intro">与整个行业分享你的经验与见解</span>
                            </a>
                        </li>
                        <li>
                            <a href="http://zhuanlan.freebuf.com" target="_blank">
                                <span class="img"><img src="http://image.3001.net/images/header/icon-column.png"></span>
                                <span class="name">申请专栏</span>
                                <span class="intro">自由创作，打造自主内容品牌</span>
                            </a>
                        </li>
                        <li>
                            <a href="https://www.vulbox.com/bounties/detail-72" target="_blank">
                                <span class="img"><img src="http://image.3001.net/images/header/icon-leak.png"></span>
                                <span class="name">提交漏洞</span>
                                <span class="intro">与数万白帽一起，让互联网更安全</span>
                            </a>
                        </li>
                        <li class="last">
                            <a href="https://www.vulbox.com/bounties" target="_blank">
                                <span class="img"><img src="http://image.3001.net/images/header/icon-test.png"></span>
                                <span class="name">参与众测</span>
                                <span class="intro">挖洞开启自由职业之路</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="dropdown-menu wenku-menu" id="wenku-menu">
                <div class="container">
                    <ul class="menu">
                        <li>
                            <a href="http://www.freebuf.com/wenku" target="_blank">
                                <span class="img"><img src="http://image.3001.net/images/header/icon-write.png"></span>
                                <span class="name">文库</span>
                                <span class="intro">最全的FB百科</span>
                            </a>
                        </li>
                        <li class="last">
                            <a href="http://www.freebuf.com/special-subject" target="_blank">
                                <span class="img"><img src="http://image.3001.net/images/header/icon-test.png"></span>
                                <span class="name">专题</span>
                                <span class="intro">浓缩的安全精华汇总</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<!----------header end---------->
<!--<script type="application/javascript">
    var  _value_tab = '';
    $(function(){
        var _that = '', _show_flag = 0;
        $('.header .header-container .nav .nav-child > li:not(input[data-value])').mouseover(function() {
            $('.header .dropdown-menu').stop().slideUp(50);
        });
        $('.header').mouseout(function() {
            $('.header .dropdown-menu').stop().slideUp(50);
        });
        /*$('.header .header-container .nav .nav-child > li').mouseover(function() {
         _value_tab = $(this).attr('data-value');
         $('#'+_value_tab).siblings('.dropdown-menu').stop().slideUp(50);
         $('#'+_value_tab).stop().slideDown(100);
         });*/
        $(".header .header-container .nav .nav-child > li").hoverDelay({
            hoverDuring: 500,
            hoverEvent: function(){
                $('#'+_value_tab).siblings('.dropdown-menu').stop().slideUp(50);
                $('#'+_value_tab).stop().slideDown(100);
            }
        });
        $('.header .dropdown-menu').mouseover(function() {
            _value_tab = $(this).attr('id');
            _that = this;
            $('.nav-child li[data-value="'+_value_tab+'"]').addClass('hover');
            $(this).stop().slideDown(50);
        }).mouseout(function() {
            $('.nav-child li[data-value="'+_value_tab+'"]').removeClass('hover');
            $(_that).stop().slideUp(50);
        });

        $(".nav-small .nav-child > li").click(function(event){
            var ev = ev || event;
            ev.stopPropagation();

            if($(this).find('.nav-child2').is(":hidden")) {
                _show_flag = 1;
                $(this).find('.nav-child2').slideDown();
                $(this).find('.icon-arrow').addClass('bottom');
            }else {
                _show_flag = 0;
                $(this).find('.nav-child2').slideUp();
                $(this).find('.icon-arrow').removeClass('bottom');
            }
            $(this).siblings().find('.nav-child2').slideUp();
            $(this).siblings().find('.icon-arrow').removeClass('bottom');
        });
        //头部投稿按钮hover状态展开菜单
        $(".btn-publish-child > ul > li").hover(function(){
            $(this).addClass("active");
            $(this).siblings().removeClass("active");
        });

        $(document).click(function(event){
            var ev = ev || event;
            $(".login-after").find(".login-after-child").hide();
        });
        //点击用户信息，出现下拉菜单
        $("#user-info").click(function(event){
            var ev = ev || event;
            ev.stopPropagation();
            $(".login-after").find(".login-after-child").toggle();
        });
        //顶部导航
        $(".nav-small").click(function(){
            $(this).find(".nav-child").slideToggle();
        });
        var that = '';
        $('.header .header-container .nav .nav-child > li').mouseover(function() {
            that = this;
            $(this).find('.dropdown-menu').stop().slideDown(200);
        }).mouseout(function() {
            $(that).find('.dropdown-menu').stop().slideUp(200);
        });
    });
    $(".nav-small .nav-child > li").click(function(event){
        var ev = ev || event;
        ev.stopPropagation();
        $(this).siblings('li').find('.dropdown-menu').hide();
        $(this).find(".dropdown-menu").toggle();
    });
    //鼠标经过(hover)事件的延时处理
    (function($){
        $.fn.hoverDelay = function(options){
            var defaults = {
                hoverDuring: 100,
                outDuring: 100,
                hoverEvent: function(){
                    $.noop();
                },
                outEvent: function(){
                    $.noop();
                }
            };
            var sets = $.extend(defaults,options || {});
            var hoverTimer, outTimer;
            return $(this).each(function(){
                $(this).hover(function(){
                    _value_tab = $(this).attr('data-value');
                    clearTimeout(outTimer);
                    hoverTimer = setTimeout(sets.hoverEvent, sets.hoverDuring);
                },function(){
                    clearTimeout(hoverTimer);
                    outTimer = setTimeout(sets.outEvent, sets.outDuring);
                });
            });
        }
    })(jQuery);
</script>-->
<script type="text/javascript" src="http://static.3001.net/js/header/header.js"></script><script>
    jQuery(window).load(function(){
      if(jQuery(window).width()>480){
        jQuery(".main-header").sticky({ topSpacing: 0 });
      }else{
        jQuery(".main-header nav").removeClass("navbar-fixed-top");
      }
      jQuery("#mar-right").sticky({ topSpacing: 105,bottomSpacing: 410 });
    });
</script>
<script src="http://www.freebuf.com/buf/themes/freebuf/js/layer.js"></script>
<script type="text/javascript" src="http://static.3001.net/js/pretty/prettify.js"></script>
<script type="text/javascript" src="http://static.3001.net/js/header/lazyload.js"></script>
<script type="text/javascript" charset="utf-8">
      jQuery(function() {
          jQuery("img").lazyload({
              effect : "fadeIn"
          });
      });
 </script>
<script type="text/javascript">
    window.onload = function(){
        prettyPrint();
    }
</script>
<script language="JavaScript" type="text/javascript">
//<![CDATA[
var va = "您已经点亮过了";
function acv_vote(id,option, m){
  if( m==null) m =''; m = m + '';
  jQuery('#acv_stat_'+m+id).html('Loading...');
  var url="http://www.freebuf.com/index.php?acv_ajax=true&option="+option+"&ID="+id;
  jQuery.get(url,function(d){
    d =d.split('|');var s='#acv_stat_'+m+d[0];
    var sele = '#cos_support-'+m+id,unsele = '#cos_unsupport-'+m+id,tpjs = 'javascript:alert(va)';
    jQuery( s ).html( d[1] );jQuery(s).fadeOut(400,function(){jQuery(s).fadeIn();});
    if( d[2] == 1 ){ jQuery(sele).html(jQuery(sele).html()*1+1); }
    if( d[2] == -1 ){ jQuery(unsele).html(jQuery(unsele).html()*1+1); }
    jQuery('#vote4-'+id).attr('href',tpjs);jQuery('#vote4-2'+id).attr('href',tpjs);
    jQuery('#votea-'+id).attr('href',tpjs);jQuery('#votea-2'+id).attr('href',tpjs);
  });
}
  
$(document).on("mouseenter",".comment-tools",function(){
  $(this).find(".btn-report").show();
  $(this).find(".btn-report").addClass("hover");
}).on("mouseleave",".comment-tools",function(){
  var $_this = $(this);
  $(this).find(".btn-report").removeClass("hover");
  if(!$(this).find(".dropup").hasClass('open')){
    $(this).find(".btn-report").hide(); 
    $_this.find(".dropdown-menu").css("display","none");
  }else{
    setTimeout(function(){
      if(!$_this.find(".btn-report").hasClass("hover")){
        $_this.find(".dropup").removeClass("open");
        $_this.find(".dropdown-menu").css("display","none");
        $_this.find(".btn-report").hide(); 
      }
    },"500");
  }
})

$(document).on("click",".click_report",function(){
  $(this).parent().parent().css("display","none");
  var id = $(this).attr("data-id");
  var url="http://www.freebuf.com/index.php?acv_ajax=true&option=0&ID="+id;
  $_this = $(this);
  jQuery.get(url,function(d){
    d =d.split('|');
    if(d[1]=='您已经点过灯了'){
      d[1] = '您已经举报过了';
    }
    if(d[1]=='Thank you'){
      d[1] = '举报成功';
    }
    $_this.parent().parent().parent().find(".btn-report").text(d[1]);
    $_this.parent().parent().parent().find(".btn-report").css("display","block");
  })
})

$(document).on("click",".btn-report",function(){
  if($(this).parent().hasClass('open')){
    $(this).parent().find(".dropdown-menu").css("display","block");
  }else{
    $(this).parent().find(".dropdown-menu").css("display","none");
  }
})
//]]>
</script>
<div class="column-article" data-column="">
            <div class="container pad-top35">
        <div class="row clearfix">
            <div class="col-md-9" id="getWidth">
                                    <div class="reletive search-xs-wrap">
                    <div class="form-group has-active search-col search-xs">
                        <form id="hpsform-new" class="navbar-search navbar-form" onsubmit="return dispatch()">
                            <div class="form-group">
                                <input id="q" class="input form-control" type="text" placeholder="关键字查找" autocomplete="off" title="关键字查找" name="q">
                                <button class="submit" type="submit"></button>
                            </div>
                        </form>
                    </div>
                </div>
                    <script type="text/javascript">
                        var dispatch = function () {
                            console.log(123)
                            var q = document.getElementById("q");
                            if (q.value == "") {
                                q = document.getElementById("bigq");
                            }
                            if (q.value != "") {
                                window.open('http://www.freebuf.com/?s=' + q.value, "_blank");
                                return false;
                            } else {
                                return false;
                            }
                        }
                    </script>
                                <div class="article-wrap panel panel-default">
                                                            <div class="articlecontent">
                                                    <div class="title">
                                <h2>
                                    深入解读MS14-068漏洞：微软精心策划的后门？                                </h2>
                                <div class="property">
                                                                            <span class="name"><a href="http://www.freebuf.com/author/walkerfuz" title="由 walkerfuz 发布" rel="author">walkerfuz</a></span>
                                                                        <span class="icon-f"><a href="http://zhuanlan.freebuf.com" target="_blank"><img src="http://image.3001.net/images/index/column-iden.png" title="专栏作者"></a></span>
                                    <span class="time">2015-01-11</span>
                                                                                                                <span class="rmb"><img title="现金奖励" src="http://image.3001.net/images/new/icon-m.jpg"/></span>
                                                                        <span class="look">共<strong>682101</strong>人围观
                                        ，发现 <strong>68</strong> 个不明物体 </span>                                      </span>
                                                                <span class="tags">
                                      <a href="http://www.freebuf.com/./vuls">漏洞</a><a href="http://www.freebuf.com/./articles/system">系统安全</a></span>
                                    <span class="tags_01"></span>
                                </div>
                            </div>
                                                                                                <div id="contenttxt">
                            <p style="margin-top: 5px;margin-bottom: 10px;text-align: justify"><span style="color: rgb(38, 38, 38); font-size: 18px;"><strong>0&#215;0&nbsp;背景</strong></span></p>
<p><span style="color: rgb(38, 38, 38);"><strong>初次认识该漏洞是在FreeBuf上对该漏洞的预警<a href="http://www.freebuf.com/articles/system/52127.html" target="_blank" title="" data_ue_src="http://www.freebuf.com/articles/system/52127.html">《漏洞预警：系统权限提升漏洞（CVE-2014-6324）影响全版本Windows服务器》</a>：</strong></span></p>
<p>微软今天（2014-11-18）发布了一个紧急补丁，修复了一个影响全部版本Windows服务器的严重漏洞。今天发布的MS14-068漏洞补丁用于解决Microsoft Windows&nbsp;Kerberos&nbsp;KDC漏洞（CVE-2014-6324），该漏洞允许黑客提升任意普通用户权限成为域管理员（Domain Admin）身份。也就是说，你在一台普通域用户的机器上利用这个漏洞，那么这个域用户就变成域管理员权限，然后，该域用户就可以控制整个域的所有机器了。<a href="http://www.freebuf.com/articles/system/52127.html" target="_blank" title="" data_ue_src="http://www.freebuf.com/articles/system/52127.html" textvalue="http://www.freebuf.com/articles/system/52127.html">http://www.freebuf.com/articles/system/52127.html</a></p>
<p><span style="color: rgb(0, 176, 80);"><strong>那么，问题来了，该漏洞的威力真的有这么大吗？</strong></span></p>
<p>网上出现了Github上爆出的该漏洞的Python利用程序，Python Kerberos Exploitation Kit，也就是PyKek，当然，其它站点也都开始了转发。<strong><span style="color: rgb(38, 38, 38);">经过测试，Win7的普通域用户运行该漏洞程序确实能够成为域管理员权限。但网上大家的测试都是在域用户的本地账户中才能测试成功。</span></strong></p>
<p><span style="color: rgb(38, 38, 38);"><strong>为什么Windows关于MS14-068的公告板中并没有提出这一点？按道理来说，越是有限制的漏洞利用对软件开发人员越是有利的，漏洞利用的机会越少，他们受到的谴责就会越少。</strong></span></p>
<p><span style="color: rgb(0, 176, 80);"><strong>那么，问题又来了，真的只能用域用户的本地账户漏洞才能利用成功吗？</strong></span></p>
<p>自从Freebuf发布该漏洞预警后，再也没看到另有分析文章出现，甚至也没有POC，这让我为心目中伟大的Freebuf捉急哇，心情低落到极点，所以，自己决心从头开始研究该漏洞。</p>
<p><span style="color: rgb(0, 176, 80);"><strong>这样的话，问题又来了，作为不懂Kerberos协议的小白，这个漏洞到底是怎么产生的？</strong></span></p>
<p><span style="color: rgb(38, 38, 38);"><strong>带着种种疑问，我开始了分析之旅，时隔半月，分析完成后，没想到却发现了一个天大的秘密，我从下面几点向大家分析一下关于这个漏洞的方方面面，来揭示这个笔者认为有人精心策划的漏洞。</strong></span></p>
<p style="margin-top: 15px; margin-bottom: 10px; text-align: justify;"><span style="color: rgb(38, 38, 38); font-size: 18px;"><strong style="font-size: 18px">0&#215;1 Python版PoC的测试利用</strong></span></p>
<p style="margin-top: 5px;margin-bottom: 10px;text-align: justify"><span style="font-size: 20px"></span></p>
<p style="margin-top: 5px;margin-bottom: 10px">首先网上的Python版PyKek，搭建域环境、Python环境，对该漏洞进行了测试：</p>
<p style="margin-top: 5px;margin-bottom: 10px"><span style="color: rgb(38, 38, 38);"><strong>（1）测试环境</strong></span></p>
<p style="margin-top: 5px;margin-bottom: 10px">目的：将普通域用户权限提升为域控权限（漏洞利用后，net<br />
use \\swg.server.com\c$可以直接访问域控的网络资源）</p>
<p style="margin-top: 5px;margin-bottom: 10px;text-align: center"><img data-original="http://image.3001.net/images/20150110/14208226188520.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" style="float:none" title="1png.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208226188520.png!small" style="float:none" title="1png.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px"><span style="color: rgb(38, 38, 38); font-size: 16px;"><strong>（2）测试步骤</strong></span></p>
<p style="margin-top: 5px;margin-bottom: 10px">A.利用域账户domainuser/Dom12345登录普通域机器Win7，获得该域账户的域SID：</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208936562424.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="1.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208936562424.png!small" title="1.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">B.以本地账户test/123456登录普通域机器Win7，运行PyKek漏洞利用程序：</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208936972316.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="2.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208936972316.png!small" title="2.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">此时在C:\Users\test文件件会产生MIT格式的TGT文件TGT_domainuser@SERVER.COM.ccache</p>
<p style="margin-top: 5px;margin-bottom: 10px">C.利用mimikatz工具将得到的TGT_domainuser@SERVER.COM.ccache写入内存，创建缓存证书：</p>
<p style="text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208937349861.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="3.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208937349861.png!small" title="3.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">利用klist命令能够看到mimikatz创建缓存证书前后的区别。</p>
<p style="margin-top: 5px;margin-bottom: 10px">创建缓存证书之前：</p>
<p style="text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208937726495.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="4.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208937726495.png!small" title="4.png"/></p></noscript>
<p>创建缓存之后：</p>
<p style="text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208938011954.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="5.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208938011954.png!small" title="5.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">D. 在普通域机器Win7的本地账户中执行：</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208938282713.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="6.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208938282713.png!small" title="6.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">你会惊奇地发现，不用提供Win2003域控的账号密码就直接可以连接到其C盘，也就是说，现在可以访问Win2003域控机器C盘：</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208938485226.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="7.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208938485226.png!small" title="7.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">正如宣称的那样，漏洞成功利用后，域用户在不知道域控密码的情况下，可以随意访问域控上的资源，怪不得大家都说，有了这个漏洞，再也不用狂扫密码了。</p>
<p style="margin-top: 5px;margin-bottom: 10px">这是网上普遍转发的一种漏洞利用姿势，需要注意的是，域SID是以域用户登录Win7域机器获得的，而漏洞利用则是在该域机器的本地账户下才能测试成功。如果搭建了测试环境，你会发现，“先用域账户获得SID，然后不得不再登录本地账户测试漏洞”这一过程是多么繁（dan）琐（teng）。</p>
<p style="margin-top: 5px;margin-bottom: 10px">当然，后面会讨论为什么在域账户下无法利用成功，并提出一种绕过方法。</p>
<p style="margin-top: 5px;margin-bottom: 10px"><span style="color: rgb(0, 176, 80);"><strong>漏洞利用就是这样的，接下来我们分析一下这个漏洞到底是怎样产生的。</strong></span></p>
<p style="margin-top: 15px; margin-bottom: 10px;"><span style="font-size: 18px; color: rgb(38, 38, 38);"><strong>0&#215;2 关于Kerberos协议</strong></span></p>
<p style="margin-top: 5px;margin-bottom: 10px">在谈MS14-068漏洞之前，有必要先了解一下Kerberos协议。</p>
<pre class="prettyprint lang-python">Kerberos协议是一种基于第三方可信主机的计算机网络协议，它允许两个实体之间在非安全网络环境（可能被窃听、被重放攻击）下以一种安全的方式证明自己的身份。</pre>
<p style="margin-top: 5px;margin-bottom: 10px"><span style="color: rgb(38, 38, 38);"><strong>下面我们从Kerberos是如何设计出来的来学习该协议的原理。</strong></span></p>
<p style="margin-top: 5px;margin-bottom: 10px">这个协议解决的根本问题，假设A和B共有一个秘密，在一个非安全网络环境中，A怎样才能向B证明自己就是A。</p>
<p style="margin-top: 5px;margin-bottom: 10px"><strong><span style="color: rgb(38, 38, 38);">最简单的方式就是，A直接将秘密发送给B，由B来判断这个秘密的真伪。但在非安全网络环境中，秘密可能会被窃听或中间人攻击，所以这种方式不可取。</span></strong></p>
<p style="margin-top: 5px;margin-bottom: 10px">接下来考虑的是，A用秘密作为密钥加密一段文字生成一段密文，然后将文字本身和密文一起发给B，B接收后用秘密解密密文得到文字，然后和接收的文字对比，如果两者一致，那么也能证明秘密的正确性，从而也能验证A的身份。</p>
<p style="margin-top: 5px;margin-bottom: 10px">但如果该认证请求被窃听，攻击者能得到加密后密文和加密前的明文，只要时间允许，总能推导出密钥的数值，也就是秘密肯定会被窃取。所以密码界有个规定，长期存在的密钥不适合在网络中传输，否则总会有被窃取的风险。</p>
<p style="margin-top: 5px;margin-bottom: 10px">不使用长期存在的密钥，那使用短期存在的密钥进行验证应该是没问题的，关键是，谁来提供这个短期存在密钥给A和B？于是就出现了第三方可信机构KeyDistribution Center，KDC。</p>
<p style="margin-top: 5px;margin-bottom: 10px">在请求认证之前，Client-A先去向KDC申请本次向Server-B认证需要的SessionKey，由KDC将SessionKey分发给Client-A和Server-B，最后Client-A就可以利用这个SessionKey向Server-B进行认证了。为了SessionKey不被窃取，该SessioKey用A和B自身的密码分别加密：</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208226202364.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" style="float:none" title="2.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208226202364.png!small" style="float:none" title="2.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">这里会有两个问题：</p>
<p style="margin-top: 5px;margin-bottom: 10px">（1）A向KDC申请SessionKey，它可能很快就收到SessionKey，但B可能因为网络环境原因，很晚或者根本收不到SessionKey，这样就导致认证无法进行，解决办法就是，KDC将两份加密的SessionKey都发给A，由A在向B发出认证请求时将原本属于Server-B的SessionKey一同发送给Server-B</p>
<p style="margin-top: 5px;margin-bottom: 10px">（2）A提出SessionKey的申请时，KDC凭什么就生成了SessionKey给了A，也就是说，KDC缺乏对A的认证，所以在分发SessionKey之前，KDC需要增加对A的认证，解决办法就是，将KDC机构分成两部分：</p>
<pre class="prettyprint lang-python">AS：Authentication&nbsp;Service，用于KDC对A的认证
TGS：Ticket&nbsp;Granting&nbsp;Ticket，用于KDC向A和B分发Session&nbsp;Key</pre>
<p style="margin-top: 5px;margin-bottom: 10px">另外，还有一点需要注意的是，为了对短期有效的SessionKey进行验证，Kerberos协议要求系统内的所有主机基于时间同步，所以Client-A向Server-B进行认证就不用SessionKey加密一段密文后还得发送一段明文过去，直接用SessionKey加密当前时间即可。</p>
<p style="margin-top: 5px;margin-bottom: 10px">到此为止，整个Kerberos协议大体框架已经出来了：</p>
<p style="margin-top: 5px;margin-bottom: 10px;text-align: center"><img data-original="http://image.3001.net/images/20150113/14211274681736.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="5.png"/></p>
<noscript><img src="http://image.3001.net/images/20150113/14211274681736.png!small" title="5.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">需要注意的是，这里涉及到两个SessionKey的申请，一个是SessionKeya-kdc，另一个是SessionKeya-b，这是因为基于刚才的三方认证以及尽量使用短期有效密钥的思想，本协议变成了两次三方认证：</p>
<p style="margin-top: 5px;margin-bottom: 10px">（1）AS作为Client-A与TGS之间的第三方，需要完成对A进行认证，同时为Client-A向TGS提出SessionKeya-b请求提供一个SessionKeya-kdc，根据刚才的分析，为了防止TGS无法收到SessionKey，如图第②步，原本需要发往TGS的SessionKeya-kdc（被KDC密码加密为TGT）会一同发往Client-A，由Client-A在第③步中转交给TGS</p>
<p style="margin-top: 5px;margin-bottom: 10px">（2）TGS作为Client-A与Server-B之间的第三方，需要为A和B分别提供SessionKeya-b，为了防止Server-B无法收到SessionKey，如图第④步，原本需要发往Server-B的SessionKeya-b（被Server-B密码加密为service Ticket）会一同发往Client-A，由Client-A在第⑤步中转交给Server-B</p>
<p style="margin-top: 5px;margin-bottom: 10px">上述过程也就是Kerberos协议的基本框架，基于微软对Kerberos的介绍，上面其实对应的是下面微软提供的Kerberos协议流程：</p>
<p style="margin-top: 5px;margin-bottom: 10px;text-align: center"><img data-original="http://image.3001.net/images/20150110/14208231836189.gif!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="IC195542.gif"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208231836189.gif!small" title="IC195542.gif"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">或者你也可以认为，是网上解释MS14-068漏洞时用的这张示意图：</p>
<p style="margin-top: 5px;margin-bottom: 10px;text-align: center"><img data-original="http://image.3001.net/images/20150110/14208232564177.gif!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="kerberos.gif"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208232564177.gif!small" title="kerberos.gif"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px"><span style="color: rgb(38, 38, 38);"><strong>具体来说，Kerberos协议分为以下步骤（第六步可选）：</strong></span></p>
<p style="margin-top: 5px;margin-bottom: 10px">第①步：KRB_AS_REQ：Client-A发送Authenticator向KDC的AS服务认证自己的身份（通过提供自身密码加密的一个时间戳TimeStamp）</p>
<p style="margin-top: 5px;margin-bottom: 10px">第②步：KRB_AS_REP：AS通过KDC数据库中存储的Client-A密码的副本，解密收到的Authenticator，如果解密出的TimeStamp符合要求，则AS服务认为Client-A就是所谓的Client-A。认证成功后，AS服务生成一个短期有效的SessionKeya-kdc，将该Key使用A的密码副本加密成密文1，另外将Key连同时间戳标志（控制该SessionKey的有效时间）通过TGS服务的密码也就是KDC的密码加密为密文2（称为TGT），将这两个密文组合成KRB_AS_REP返回给Client-A</p>
<p style="margin-top: 5px;margin-bottom: 10px">第③步：KRB_TGS_REQ：Client-A在接收到KRB_AS_REP后，首先使用自身密码解密密文1得到SessionKeya-kdc，此时需要注意的是，密文2（TGT）是被KDC的密码加密的，所以Client-A无法解密，这也是Kerberos协议设计的精妙之处，既解决了Server端（TGS相对于Client-A也称之为Server端）无法及时接收SessionKey的问题，又不怕Client-A对该TGT的伪造，因为Client-A不知道Server端的密码</p>
<p style="margin-top: 5px;margin-bottom: 10px">得到SessionKeya-kdc后，Client-A利用其加密时间戳生成Authenticator用于向TGS申请Client-A与Client-B进行认证所需的SessionKeya-b，连同刚才KRB_AS_REP接收的TGT一同组合成KRB_TGS_REQ发送给TGS</p>
<p style="margin-top: 5px;margin-bottom: 10px">第④步：KRB_TGS_REP：TGS在接收到KRB_TGS_REP之后，利用KDC密码解密TGT获得本来就该发送给自己的SessionKeya-kdc，然后用其解密KRB_TGS_REQ中的Authenticator得到Client-A发送过来的时间戳，如果时间戳符合要求，则生成一个短期有效的SessionKeya-b，注意此时利用SessionKeya-kdc将SessionKeya-b加密为密文1，然后利用Server-B的密码将SessionKeya-b加密为密文2（称为ServiceTicket），两个密文一同构成KRB_TGS_REP返回给Client-A</p>
<p style="margin-top: 5px;margin-bottom: 10px">第⑤步：KRB_AP_REQ：Client-A在接收到KRB_TGS_REP之后，首先使用缓存的SessionKeya-kdc将密文1中的SessionKeya-b解密出来，然后利用其加密时间戳生成Authenticator用于向B进行对自身的验证，另外，和刚才TGT一样，密文2也就是ServiceTicket是用Server-B的密码加密的，所以Client-A无法解密，也就无法伪造，这也同样解决了在三方认证中作为Server端的B无法及时接收SessionKey的问题，又不怕Client-A对ServiceTicket的伪造</p>
<p style="margin-top: 5px;margin-bottom: 10px">第⑥步：KRB_AP_REP：Server-B受到KRB_AP_REQ之后，利用自身密码解密ServiceTicket，得到SessionKeya-b，然后用SessionKeya-b解密Authenticator得到时间戳，验证A的身份</p>
<p style="margin-top: 5px;margin-bottom: 10px">这就是整个Kerberos协议的基本流程。</p>
<p style="margin-top: 15px; margin-bottom: 10px;"><span style="color: rgb(38, 38, 38); font-size: 18px;"><strong>0&#215;3 PAC与Kerberos的关系</strong></span></p>
<p style="margin-top: 5px;margin-bottom: 10px">上面是标准Kerberos协议的基本流程，MIT也实现了一套标准的Kerberos协议，而微软在Windows平台上的Kerberos并没有采用MIT的实现，而是对Kerberos协议进行了一些扩充，其中最重要的扩充就是增加了认证过程中的权限认证，也就是在协议中增加了PAC（Privilege<br />
Attribute Certificate），特权属性证书。</p>
<p style="margin-top: 5px;margin-bottom: 10px">为什么会增加这些呢？可以这样理解，当用户Client-A与Server-B完成认证，只是向Server-B证明了Client-A就是所谓的Client-A，但此时Client-A如果需要访问Server-B上的网络资源，但Server-B现在其实并不知道Client-A是否有访问自身网络资源的权限（Kerberos协议中并没有规定权限问题）</p>
<p style="margin-top: 5px;margin-bottom: 10px">难不成此时Server-B必须再向KDC验证Client-A是否有访问网络资源的权限？当然不是，微软实现Kerberos认证协议的同时巧妙地引入了PAC解决了这个问题。（至少MS14-068漏洞之前大家是这样认为的）</p>
<p style="margin-top: 5px;margin-bottom: 10px">在一个域中，如何才能知道某个域用户所拥有的权限呢？自然是需要提供User的SID和所在组Group的SID。必须了解的一个前提是，KDC、A和B三者中，B只信任KDC所提供的关于A到底是什么权限，所以在一个域初始时，KDC上拥有A和B的权限。现在需要解决的是，KDC必须告诉B关于A的权限，这样B验证A的权限后才能决定让不让A访问自身的网络资源。</p>
<p style="margin-top: 5px;margin-bottom: 10px">为了最终使得Server-B能知道Client-A所具有的权限，微软在KRB_AS_REP中的TGT中增加了Client-A的PAC（特权属性证书），也就是Client-A的权限，包括Client-A的User的SID、Group的SID：</p>
<p style="margin-top: 5px;margin-bottom: 10px;text-align: center"><img data-original="http://image.3001.net/images/20150110/14208234397566.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="ddd.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208234397566.png!small" title="ddd.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">可以看到被KDC加密的TGT中，不仅包括了被加密的Session<br />
Keya-kdc，还包括KRB_AS_REQ中申请者（Client-A）的权限属性证书，为了防止该特权证书被篡改（即使被KDC加密，Client-A无法轻易解密，但谁也无法保证绝对的安全），在PAC的尾部增加了两个校验Server Signature和KDC Signature：</p>
<p style="margin-top: 5px;margin-bottom: 10px">这两个校验一个是Server Signature，另一个是KDC Signature，对于Client-A与AS服务来说，Server代表的是TGS服务，KDC代表的是AS服务（AS作为Client-A与TGS的第三方信任机构），而AS服务与TGS服务具有相同的krgtgt账号，所以这两个校验都是krgtgt账号的密码生成的，当然，整个TGT也是用KDC的密码也就是krgtgt账号密码加密的，它们三者不同的是，用的算法和加密内容有所不同。</p>
<p style="margin-top: 5px;margin-bottom: 10px">微软是这样打算的，无论如何也要把PAC从KDC传送到Server-B，为了在Kerberos认证过程中实现，微软选择了如下做法：</p>
<p style="margin-top: 5px;margin-bottom: 10px">将PAC放在TGT中加密后从AS服务经Client-A中转给TGS服务，再放在由TGS服务返回的Service<br />
Ticket中加密后经Client-A中转给Server-B</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><img data-original="http://image.3001.net/images/20150113/14211277383314.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="55.png"/></p>
<noscript><img src="http://image.3001.net/images/20150113/14211277383314.png!small" title="55.png"/></p></noscript>
<p><span style="color: rgb(38, 38, 38);"><strong><span id="_baidu_bookmark_start_6" style="display: none; line-height: 0px;">‍</span></strong></span><span id="_baidu_bookmark_start_8" style="display: none; line-height: 0px;">‍</span><span style="color: rgb(38, 38, 38);"><strong>需要注意的是，在KRB_TGS_REQ阶段，携带PAC的TGT被TGS服务接收后，认证A的合法性后（解密Authenticator符合要求）会将PAC解密出来，验证尾部两个签名的合法性，如果合法则认为PAC没有被篡改，于是重新在PAC的尾部更换了另外两个签名，一个是Server Signature，这次是以Server-B的密码副本生成的签名（因为对于Client-A和Server-B，这次的第三方机构是TGS服务），另外一个是KDC Signature，这次不再使用KDC的长期有效的Key，而是使用在AS阶段生成的短期有效的SessionKeya-b，（网上说的是第二个签名仍旧是KDC Key，但如果用KDC中krgtgt账号密码生成签名，最后转发给Server-B后，由于没有krbtgt的密码而无法验证第二个签名的正确性，所以这里用SessionKeya-b生成签名才是合理的，或许这里理解错了，敬请指出）最终成为New Signed PAC被拷贝在ServericeTicket中被加密起来。</strong></span><span id="_baidu_bookmark_end_9" style="display: none; line-height: 0px;">‍</span><span style="color: rgb(38, 38, 38);"><strong><span id="_baidu_bookmark_end_7" style="display: none; line-height: 0px;">‍</span></strong></span></p>
<p style="margin-top: 5px;margin-bottom: 10px">最终绕过来绕过去，KDC上所拥有的关于Client-A的权限证书PAC终于发给了Server-B，Server-B在对Client-A进行认证的同时，同时也能判断Client-A有没有访问网络资源的权限。</p>
<p style="margin-top: 5px;margin-bottom: 10px">到这里PAC与Kerberos协议的关系也就明朗了。</p>
<p style="margin-top: 15px; margin-bottom: 10px;"><span style="color: rgb(38, 38, 38); font-size: 18px;"><strong>0&#215;4 从Pykek源码分析MS14-068漏洞</strong></span></p>
<p style="margin-top: 5px;margin-bottom: 10px">现在切入正题，开始研究MS14-068漏洞的产生。</p>
<p style="margin-top: 5px;margin-bottom: 10px"><span style="color: rgb(38, 38, 38);"><strong>首先看一下微软关于MS14-068公告板：</strong></span></p>
<pre class="prettyprint lang-html">This&nbsp;security&nbsp;update&nbsp;resolves&nbsp;a&nbsp;privately&nbsp;reported&nbsp;vulnerability&nbsp;in&nbsp;Microsoft&nbsp;Windows&nbsp;Kerberos&nbsp;KDC&nbsp;that&nbsp;could&nbsp;allow&nbsp;an&nbsp;attacker&nbsp;to&nbsp;elevate&nbsp;unprivileged&nbsp;domain&nbsp;user&nbsp;account&nbsp;privileges&nbsp;to&nbsp;those&nbsp;of&nbsp;the&nbsp;domain&nbsp;administrator&nbsp;account.
An&nbsp;attacker&nbsp;could&nbsp;use&nbsp;these&nbsp;elevated&nbsp;privileges&nbsp;to&nbsp;compromise&nbsp;any&nbsp;computer&nbsp;in&nbsp;the&nbsp;domain,&nbsp;including&nbsp;domain&nbsp;controllers.&nbsp;An&nbsp;attacker&nbsp;must&nbsp;have&nbsp;valid&nbsp;domain&nbsp;credentials&nbsp;to&nbsp;exploit&nbsp;this&nbsp;vulnerability.&nbsp;The&nbsp;affected&nbsp;component&nbsp;is&nbsp;available&nbsp;remotely&nbsp;to&nbsp;users&nbsp;who&nbsp;have&nbsp;standard&nbsp;user&nbsp;accounts&nbsp;withdomain&nbsp;credentials;this&nbsp;is&nbsp;not&nbsp;the&nbsp;case&nbsp;for&nbsp;users&nbsp;with&nbsp;local&nbsp;account&nbsp;credentialsonly.</pre>
<p style="margin-top: 5px;margin-bottom: 10px">仔细看看，其实这个公告板就是说了这个洞的危害，可以把没有域控权限的普通域用户提权为域控权限。另外，网上也有两种对该漏洞产生原因的说法：</p>
<p style="margin-top: 5px;margin-bottom: 10px"><strong><span style="color: rgb(38, 38, 38);">从客户端解释：</span></strong></p>
<pre class="prettyprint lang-html">当用户进行登录身份验证服务,服务会验证PAC中的签名,并使用PAC中的数据为用户创建一个登录令牌。譬如说,如果PAC能够携带有效的签名表明“Secpulse”是“域管理”安全组的成员，那么创建的登录令牌就将Secpulse当作“域管理”组中成员。这样的Kerberos认证存在问题，攻击者可以伪造身份，从域用户提升到域管理权限。</pre>
<p style="margin-top: 5px;margin-bottom: 10px"><span style="color: rgb(38, 38, 38);"><strong>从服务端解释：</strong></span></p>
<pre class="prettyprint lang-html">微博@jacktang310
程序员在实现KDC服务器的PAC&nbsp;signature时没有严格控制使用checksum的算法，在原来的设计中要用到HMAC系列的checksum算法，也就是必须要有key的参与，但实现的时候允许所有的checksum算法都可以，包括MD5，这样客户端就可以伪造PAC的包了。</pre>
<p style="margin-top: 5px;margin-bottom: 10px">从上面的说法来看，该漏洞利用是通过客户端来伪造高权限的PAC产生的，但根据前面对PAC与Kerberos关系的分析，貌似没有破绽来说明客户端有机会伪造PAC，那到底是怎么回事呢？带着这个疑惑，我开始分析了Github上很火的PyKek攻击包源码。</p>
<p style="margin-top: 5px;margin-bottom: 10px">首先，在0&#215;1小节POC代码测试步骤C中，使用Pykek攻击包期间利用Wireshark抓包如下：</p>
<p style="margin-top: 5px;margin-bottom: 10px;text-align: center"><img data-original="http://image.3001.net/images/20150110/14208235579973.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="pykek.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208235579973.png!small" title="pykek.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">mimikatz在内存新建缓存证书后，net<br />
use过程中的抓包如下：</p>
<p style="margin-top: 5px;margin-bottom: 10px;text-align: center"><img data-original="http://image.3001.net/images/20150110/14208226299143.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="net use.png"/><br/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208226299143.png!small" title="net use.png"/><br/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">看到抓包结果，我立即产生了两个疑惑：</p>
<pre class="prettyprint lang-html">（1）传说中Kerberos协议中的KRB_AP_REQ和KRB_AP_REP过程哪里去了？
（2）为什么会产生两次TGS_REQ和TGS_REP过程？？</pre>
<p style="margin-top: 5px;margin-bottom: 10px">第一个问题的原因很好解决，查阅资料得知，由于Kerberos协议是一种认证网络协议，它通常是其它网络有关协议的前提，比如说SMB、FTP等，在SMB等协议的实现中SMB第一个请求包实际上会包含KRB_AP_REQ，这也就是协议整合吧，我们通过打开第一个SMB请求的数据包就可发现：</p>
<p style="margin-top: 5px;margin-bottom: 10px;text-align: center"><img data-original="http://image.3001.net/images/20150110/14208236493760.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="ap_req.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208236493760.png!small" title="ap_req.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">而第二个问题，到底为什么会产生两次TGS_REQ和TGS_REP过程，这个疑惑基本是我在全部分析完整个漏洞才搞懂的，但它却影响了我整个分析过程，下面一点点向大家解释。</p>
<p style="margin-top: 5px;margin-bottom: 10px">既然网上都说，本次漏洞利用是通过客户端伪造高权限PAC产生的，那PyKek工具产生的AS_REQ、AS_REP和TGS_REQ、TGS_REP过程中肯定有端倪，下面我们从PyKek源码仔细分析一下</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208939541482.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="s_1.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208939541482.png!small" title="s_1.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">可以看到，真个漏洞利用过程经历了以下几步：</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><strong><img data-original="http://image.3001.net/images/20150110/14208939742244.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="s_2.png"/></strong></p>
<noscript><img src="http://image.3001.net/images/20150110/14208939742244.png!small" title="s_2.png"/></strong></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">不知道你是否注意，接收AS_REP后，能解密得到TGT，但接收TGS_REP后，却同样接收的是TGT，这是怎么回事？原理上不是说TGS_REP之后，Client端接收的是ServiceTicket吗？其实这就是该漏洞的根源，下面根据源码逐步分析一下具体过程。</p>
<p style="margin-top: 5px; margin-bottom: 10px; line-height: 173%;"><span style="color: rgb(38, 38, 38); font-size: 16px;"><strong>0&#215;4.1 构造AS_REQ</strong></span></p>
<p style="margin-top: 5px;margin-bottom: 10px">首先看一下AS_REQ的构造过程，这里是代码主体：</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208940002907.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="s_3.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208940002907.png!small" title="s_3.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">上面对于AS_REQ的构造，主要用current_time和Key构造了用于提交给AS服务验证的Authenticator，另外，却增加了一个include-PAC标志，通过查看源代码，发现该include-PAC标志被设置为了false：</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208940246573.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="s_4.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208940246573.png!small" title="s_4.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">查阅资料得知，微软在实现PAC的过程中，特意增加了一个include-PAC标志，通常情况下，AS_REQ请求中如果该标志被设置为true，只要AS服务对Client-A通过认证，那么会在返回的AS_REP数据包中的TGT中加入PAC信息；而如果在AS_REQ请求时，include-PAC标志被设置为false，那么AS_REP返回的TGT中就不会包含PAC信息。</p>
<p style="margin-top: 5px;margin-bottom: 10px">这一点，我们在刚才Wireshark抓包中显示AS_REQ数据包和AS_REP数据包的大小就可以看出来（通常携带PAC信息的AS_REP数据包可以达到上千字节）。</p>
<p style="margin-top: 5px; margin-bottom: 10px; line-height: 173%;"><span style="color: rgb(38, 38, 38); font-size: 16px;"><strong>0&#215;4.2 接收AS_REP</strong></span></p>
<p style="margin-top: 5px;margin-bottom: 10px">将AS_REQ发送给KDC后，KDC按照协议规定将会返回两个东西：利用user_key加密的Session<br />
Keya-kdc和被KDC密码加密的TGT（不包含PAC信息）。下面我们看一下PyKek是如何接收AS_REP并解密的：</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208940434272.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="s_5.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208940434272.png!small" title="s_5.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">具体对session_key的解密也和之前的原理类似：<br/></p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208940699128.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="s_6.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208940699128.png!small" title="s_6.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">根据上面的接收过程，并参考Wireshark对AS_REP的截图更形象地理解整个解密过程：<br/></p>
<p style="margin-top: 5px;margin-bottom: 10px;text-align: center"><img data-original="http://image.3001.net/images/20150110/14208238826926.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="as_rep.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208238826926.png!small" title="as_rep.png"/></p></noscript>
<p style="margin-top: 5px; margin-bottom: 10px; line-height: 173%;"><strong>0&#215;4.3 构造PAC及TGS_REQ</strong></p>
<p style="margin-top: 5px;margin-bottom: 10px">之后，PyKek就开始了最重要的一步：构造PAC并放入TGS_REQ中。下面是整个过程：</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><img data-original="http://image.3001.net/images/20150110/1420894106403.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="s_7.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/1420894106403.png!small" title="s_7.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">分别看一下两个过程。</p>
<p><span style="color: rgb(38, 38, 38); font-size: 16px;"><strong><span style="color: rgb(38, 38, 38);"><span id="_baidu_bookmark_start_18" style="line-height: 0px">‍</span></span></strong><span id="_baidu_bookmark_start_20" style="line-height: 0px">‍</span><strong>0&#215;4.3.1 构造PAC</strong></span></p>
<p style="text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208941365404.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="s_8.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208941365404.png!small" title="s_8.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">由于前面我们学习了PAC的整个结构，所以不难看出来该地方构造的PAC由三部分组成：</p>
<pre class="prettyprint lang-cpp">1.&nbsp;User&nbsp;SID&nbsp;&amp;&nbsp;Group&nbsp;SID
2.&nbsp;Chksum&nbsp;of&nbsp;Server_key
3.&nbsp;Chksum&nbsp;of&nbsp;Kdc_key</pre>
<p style="margin-top: 5px;margin-bottom: 10px">通过深入跟踪源码，可以看出，User<br />
SID &amp; Group SID的构造中，其实是将该域用户的SID截断，留取前面的部分：</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208941714123.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="s_9.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208941714123.png!small" title="s_9.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">然后构造高权限的User<br />
SID &amp; Group SID：</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208941906577.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="s_10.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208941906577.png!small" title="s_10.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">对于后面两个chksum的构造：</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208942066316.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="s_11.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208942066316.png!small" title="s_11.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">由前面的定义可知：</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208942252571.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="s_12.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208942252571.png!small" title="s_12.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">可以很容易看出，这里直接用不需要Key的MD5构造的签名。也就是说什么什么意思呢，只要用户构造了前面的data（User<br />
SID &amp; Group SID），只需对data进行MD5运算，生成一个32位的MD5值即可。</p>
<p style="margin-top: 5px;margin-bottom: 10px">服务端对于MD5签名又是如何验证的呢？它只需要将前面的data取出来，进行MD5运算，如果得到的MD5值，与后面的签名一致，则认为该签名合法。</p>
<p style="margin-top: 5px;margin-bottom: 10px">但是，到这里，可能会有疑问，关于PAC尾部的签名，不是说需要server_key和kdc_key的参与吗？这就是微软犯的第一个错误：</p>
<p style="margin-top: 5px;margin-bottom: 10px"><span style="color: rgb(38, 38, 38);"><strong>在KDC机构对PAC进行验证时，对于PAC尾部的签名算法，虽然原理上规定必须是带有Key的签名算法才可以，但微软在实现上，却允许任意签名算法，只要客户端指定任意签名算法，KDC服务器就会使用指定的算法进行签名验证。</strong></span></p>
<p style="margin-top: 5px;margin-bottom: 10px">所以PyKek在客户端的攻击代码中很巧妙地利用了这个漏洞，规定使用不需要Key的MD5进行签名，只要签名构造的User<br />
SID &amp; Group SID权限信息在传输过程中不改变，那么服务端肯定能验证通过。</p>
<p style="margin-top: 5px;margin-bottom: 10px">那肯定有人还有疑问，PAC不是被放在TGT中吗？但根据include-PAC标志设置为false后，AS_REP解密得到的TGT是不携带PAC信息的，难不成要把构造的PAC放在TGT中？但TGT是被KDC密码加密的，客户端根本无法解密。</p>
<p style="margin-top: 5px;margin-bottom: 10px">这就是微软犯的第二个错误：</p>
<p style="margin-top: 5px;margin-bottom: 10px"><span style="color: rgb(38, 38, 38);"><strong>PAC没有被放在TGT中，而是放在了TGS_REQ数据包的其它地方。但可笑的是，KDC在实现上竟然允许这样的构造，也就是说，KDC能够正确解析出没有放在其它地方的PAC信息。</strong></span></p>
<p style="margin-top: 5px;margin-bottom: 10px">下面我们通过TGS_REQ的构造过程来看一下这个错误。</p>
<p><span id="_baidu_bookmark_start_375" style="display: none; line-height: 0px;">‍</span><span style="font-size: 20px;"><span id="_baidu_bookmark_start_381" style="display: none; line-height: 0px;">‍</span><span style="font-size: 16px;"><span style="color: rgb(38, 38, 38);"><strong><span id="_baidu_bookmark_start_0" style="line-height: 0px">‍</span></strong><span id="_baidu_bookmark_start_2" style="line-height: 0px">‍</span><strong>0&#215;4.3.2 构造TGS_REQ</strong><span id="_baidu_bookmark_end_3" style="line-height: 0px">‍</span><strong><span id="_baidu_bookmark_end_1" style="line-height: 0px">‍</span></strong></span><strong><span id="_baidu_bookmark_end_1" style="line-height: 0px"></span></strong></span><strong><span id="_baidu_bookmark_end_1" style="line-height: 0px"></span></strong></span><span id="_baidu_bookmark_end_382" style="display: none; line-height: 0px;">‍</span><span id="_baidu_bookmark_end_376" style="display: none; line-height: 0px;">‍</span></p>
<p style="margin-top: 5px;margin-bottom: 10px">调用：</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208942621434.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="s_13.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208942621434.png!small" title="s_13.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">定义：</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208942856649.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="s_14.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208942856649.png!small" title="s_14.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">通过上面的构造过程，结合Wireshark对TGS_REQ的截图：</p>
<p style="margin-top: 5px;margin-bottom: 10px;text-align: center"><img data-original="http://image.3001.net/images/20150110/14208226314120.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="tgs_req.png" style="float: none"/><br/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208226314120.png!small" title="tgs_req.png" style="float: none"/><br/></p></noscript>
<p>可以得知，PAC被放在了TGS_REQ数据包中的REQ_BODY中，被subkey加密了，而TGT被放在REQ_BODY前面的PADATA中，这也就是说，TGT中没有携带PAC信息，并且可以注意到，TGS_REQ中也设置了include-PAC标志信息为false。<br/></p>
<p style="margin-top: 5px;margin-bottom: 10px">另外得知，PAC信息被subkey加密，我们看一下subkey的来源：</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><strong><img data-original="http://image.3001.net/images/20150110/1420894310566.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="s_15.png"/></strong></p>
<noscript><img src="http://image.3001.net/images/20150110/1420894310566.png!small" title="s_15.png"/></strong></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px"><span style="color: rgb(38, 38, 38);"><strong>subkey竟然是Client端生成的一个随机数！</strong></span></p>
<p style="margin-top: 5px;margin-bottom: 10px">PyKek为了使得KDC能够解密获取被加密在REQ_BODY中的PAC信息，也一并把这个生成的subkey随机数放在TGS_REQ数据包中的Authenticator发给了KDC服务器。</p>
<p style="margin-top: 5px;margin-bottom: 10px">在KDC接收TGS_REQ后，可笑的是，它可以把PAC信息给解密出来了，并且由于微软犯的第一个错误：允许任意加密算法的签名，很明显，该PAC信息会被验证为合法的PAC信息。</p>
<p style="margin-top: 5px;margin-bottom: 10px">也就是说，微软所犯第二个错误触发的两个关键：</p>
<p style="margin-top: 10px;margin-bottom: 10px">（1）在TGS_REQ的REQ_BODY中放上被加密的PAC信息，并把加密用到的Subkey放到Authenticator中</p>
<p style="margin-top: 10px;margin-bottom: 10px">（2）TGS_REQ数据包中的include-PAC标志被设置为false</p>
<p style="margin-top: 5px;margin-bottom: 10px">只要按照上面的要求构造TGS_REQ数据包，KDC就会“错误地”将PAC信息解密并验证签名正确性，但你以为这样就完了吗？接下来，还有更令人吃惊的事情会发生。</p>
<p style="margin-top: 5px;margin-bottom: 10px;line-height: 173%"><span style="color: rgb(38, 38, 38);"><strong>0&#215;4.4 接收TGS_REP</strong></span></p>
<p style="text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208943292403.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="s_16.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208943292403.png!small" title="s_16.png"/></p></noscript>
<p>下面是具体解密的实现过程：</p>
<p style="text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208943571793.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="s_17.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208943571793.png!small" title="s_17.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">根据Kerberos协议原理可知，在返回的TGS_REP中，TGS服务会返回给Clinet-A两个东西：被SessionKeya-kdc加密的SessionKeya-b，另外一个是Service<br />
Ticket，但从上面解密的过程中，Client-A解密获取SessionKeya-b竟然用的是Subkey，而我们知道，subkey是一个客户端随意生成的随机数，这到底是怎么回事？</p>
<p style="margin-top: 5px;margin-bottom: 10px">起初，我也很是疑惑，甚至都想放弃，因为实在分析不下去了，自己分析的过程和协议原理竟然有着这么多不同，我也怀疑过PyKek作者是不是写错了，但通过无数次的查找资料，终于在国外一个安全博客上找到了说法，这也是微软犯的第三个令人吃惊的错误：</p>
<p style="margin-top: 5px;margin-bottom: 10px"><span style="color: rgb(38, 38, 38);"><strong>只要TGS_REQ按照刚才那两个要求设置，KDC服务器会做出令人吃惊的事情：它不仅会从Authenticator中取出来subkey把PAC信息解密并利用客户端设定的签名算法验证签名，同时将另外的TGT进行解密得到SessionKeya-kdc；</strong></span></p>
<p style="margin-top: 5px;margin-bottom: 10px"><span style="color: rgb(38, 38, 38);"><strong>在验证成功后，把解密的PAC信息的尾部，重新采用自身Server_key和KDC_key生成一个带Key的签名，把SessionKeya-kdc用subkey加密，从而组合成了一个新的TGT返回给Client-A</strong></span></p>
<p style="margin-top: 5px;margin-bottom: 10px">没错，是重新生成一个TGT，而不是ServiceTicket。</p>
<p style="margin-top: 5px;margin-bottom: 10px">如果你对前面对协议的介绍，很容易知道，TGT原本是通过AS_REP过程返回给Client-A的，而现在“毁人三观”的事情发生了，在TGS_REP过程中，KDC竟然返回个Client-A一个TGT。</p>
<p style="margin-top: 5px;margin-bottom: 10px">到这里就明白了，PyKek攻击包中TGS_REP过程接收的其实是TGT，SessionKey为SessionKeya-kdc。</p>
<p style="margin-top: 5px;margin-bottom: 10px">最终，这个TGT和SessionKeya-kdc制作成了TGT_domainuser@SERVER.COM.ccache文件。</p>
<p style="margin-top: 5px;margin-bottom: 10px">而接下来观察mimikatz工具创建的内存证书，也可以验证上述微软所犯的第三个错误：</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208943798537.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="z8.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208943798537.png!small" title="z8.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">利用TGS_REP接收的Ticket和Session<br />
Key创建的内存证书，其Server为krbtgt/SERVER.COM，再根据我们队两次三方认证的理解，很容易就知道这是AS_REQ和AS_REP过程中才会将Server端认定为krbtgt，也就是说，接收的Ticket实质为TGT。</p>
<p style="margin-top: 5px;margin-bottom: 10px">这样就能理解为啥net use时，会再多一次TGS_REQ和TGS_REP过程了，因为漏洞利用过程中的TGS_REQ和TGS_REP所完成的并不是申请ServiceTicket，而是通过“畸形”TGS_REQ请求申请的另外一个伪造后又增加了PAC信息的TGT，所以在net use之前必须再进行一次TGS_REQ与TGS_REP过程，利用缓存的TGT证书，申请用于net use（其Server为cifs）的ServiceTicket，这里从net use成功后，klist命令增加的内存证书中可以验证这一现象：</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208944045391.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="z9.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208944045391.png!small" title="z9.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">对于缓存证书，这里根据微软的说明，可以补充一点背景知识：</p>
<pre class="prettyprint lang-html">Credentials&nbsp;Cache
The&nbsp;credentials&nbsp;cache&nbsp;is&nbsp;managed&nbsp;by&nbsp;the&nbsp;Kerberos&nbsp;SSP,&nbsp;which&nbsp;runs&nbsp;in&nbsp;the&nbsp;LSA&amp;#039;s&nbsp;security&nbsp;context.&nbsp;Whenever&nbsp;tickets&nbsp;and&nbsp;keys&nbsp;need&nbsp;to&nbsp;be&nbsp;obtained&nbsp;or&nbsp;renewed,&nbsp;the&nbsp;LSA&nbsp;calls&nbsp;the&nbsp;Kerberos&nbsp;SSP&nbsp;to&nbsp;accomplish&nbsp;the&nbsp;task.
From&nbsp;the&nbsp;client&amp;#039;s&nbsp;point&nbsp;of&nbsp;view,&nbsp;a&nbsp;TGT&nbsp;is&nbsp;just&nbsp;another&nbsp;ticket.&nbsp;Before&nbsp;the&nbsp;client&nbsp;attempts&nbsp;to&nbsp;connect&nbsp;to&nbsp;any&nbsp;service,&nbsp;the&nbsp;client&nbsp;first&nbsp;checks&nbsp;the&nbsp;user&nbsp;credentials&nbsp;cache&nbsp;for&nbsp;a&nbsp;service&nbsp;ticket&nbsp;to&nbsp;that&nbsp;service.&nbsp;If&nbsp;it&nbsp;does&nbsp;not&nbsp;have&nbsp;one,&nbsp;it&nbsp;checks&nbsp;the&nbsp;cache&nbsp;again&nbsp;for&nbsp;a&nbsp;TGT.&nbsp;If&nbsp;it&nbsp;finds&nbsp;a&nbsp;TGT,&nbsp;the&nbsp;LSA&nbsp;fetches&nbsp;the&nbsp;corresponding&nbsp;logon&nbsp;session&nbsp;key&nbsp;from&nbsp;the&nbsp;cache,&nbsp;uses&nbsp;this&nbsp;key&nbsp;to&nbsp;prepare&nbsp;an&nbsp;authenticator,&nbsp;and&nbsp;sends&nbsp;both&nbsp;the&nbsp;authenticator&nbsp;and&nbsp;the&nbsp;TGT&nbsp;to&nbsp;the&nbsp;KDC,&nbsp;along&nbsp;with&nbsp;a&nbsp;request&nbsp;for&nbsp;a&nbsp;service&nbsp;ticket&nbsp;for&nbsp;the&nbsp;service.
In&nbsp;other&nbsp;words,&nbsp;gaining&nbsp;admission&nbsp;to&nbsp;the&nbsp;KDC&nbsp;is&nbsp;no&nbsp;different&nbsp;from&nbsp;gaining&nbsp;admission&nbsp;to&nbsp;any&nbsp;other&nbsp;service&nbsp;in&nbsp;the&nbsp;domain—it&nbsp;requires&nbsp;a&nbsp;session&nbsp;key,&nbsp;an&nbsp;authenticator,&nbsp;and&nbsp;a&nbsp;ticket&nbsp;(in&nbsp;this&nbsp;case,&nbsp;a&nbsp;TGT).</pre>
<p style="margin-top: 5px;margin-bottom: 10px">也就是说，net use之前，系统会从Credentials<br />
Cache中查看是否有ServiceTicket，如果没有则寻找TGT，找到后就发送给KDC申请ServiceTicket。</p>
<p style="margin-top: 5px;margin-bottom: 10px">到这里，整个漏洞的原因就清晰了。</p>
<p style="margin-top: 15px; margin-bottom: 10px;"><span style="font-size: 18px; color: rgb(38, 38, 38);"><strong>0&#215;5 铁证如山：这是谁的精心策划</strong></span></p>
<p style="margin-top: 5px;margin-bottom: 10px">下面我们总结一下通过上面的分析找到的微软所犯的三个错误：</p>
<p style="margin-top: 5px;margin-bottom: 10px"><span style="color: rgb(0, 176, 80);">第一个错误：</span></p>
<p style="margin-top: 5px;margin-bottom: 10px"><strong>在KDC机构对PAC进行验证时，对于PAC尾部的签名算法，虽然原理上规定必须是带有Key的签名算法才可以，但微软在实现上，却允许任意签名算法，只要客户端指定任意签名算法，KDC服务器就会使用指定的算法进行签名验证。</strong></p>
<p style="margin-top: 5px;margin-bottom: 10px"><span style="color: rgb(0, 176, 80);">第二个错误：</span></p>
<p style="margin-top: 5px;margin-bottom: 10px"><strong>PAC没有被放在TGT中，而是放在了TGS_REQ数据包的其它地方。但可笑的是，KDC在实现上竟然允许这样的构造，也就是说，KDC能够正确解析出没有放在其它地方的PAC信息。</strong></p>
<p style="margin-top: 5px;margin-bottom: 10px"><span style="color: rgb(0, 176, 80);">第三个错误：</span></p>
<p style="margin-top: 5px;margin-bottom: 10px"><strong>只要TGS_REQ按照刚才漏洞要求设置，KDC服务器会做出令人吃惊的事情：它不仅会从Authenticator中取出来subkey把PAC信息解密并利用客户端设定的签名算法验证签名，同时将另外的TGT进行解密得到SessionKeya-kdc；</strong></p>
<p style="margin-top: 5px;margin-bottom: 10px"><strong>在验证成功后，把解密的PAC信息的尾部，重新采用自身Server_key和KDC_key生成一个带Key的签名，把SessionKeya-kdc用subkey加密，从而组合成了一个新的TGT返回给Client-A</strong></p>
<p style="margin-top: 5px;margin-bottom: 10px">在我分析出来这些之后，我感到深深地震惊，这个漏洞的产生真实太不可思议了，明明PAC需要放在TGT中，而微软添加了一个include-PAC标志设置为false两次后，就能导致PAC可以放在其它地方；明明是需要key的签名，微软却允许任意签名算法，包括不带key的；明明是TGS_REP返回的是ServiceTicket，微软却根Kerberos协议开了天大的玩笑，返回了一个TGT。</p>
<p style="margin-top: 5px;margin-bottom: 10px"><strong>我只想说，这（TMD）得需要多么大的疏忽，才能让微软的员工犯下如此“巧妙的”错误，而且这个漏洞的触发真的是（TMD）太需要技巧了。</strong></p>
<p style="margin-top: 5px;margin-bottom: 10px"><strong>到这里，我只能以一个疑问结束我的震惊：这是谁的精心策划？答案留给读者思考吧。</strong></p>
<p style="margin-top: 15px; margin-bottom: 10px;"><span style="font-size: 18px; color: rgb(38, 38, 38);"><strong>0&#215;6 干货：如何突破“本地账户才能漏洞利用”的限制</strong></span></p>
<p style="margin-top: 5px;margin-bottom: 10px">按照网上的测试，该漏洞一般用域用户的本地账户会利用成功。</p>
<p style="margin-top: 5px;margin-bottom: 10px">但如果做过这个漏洞测试的童鞋肯定明白，首先必须登录域用户得到其在域中的SID（如果大家知道如何在本地账户下得到域用户的SID，请告知我！@#￥%……&amp;*）</p>
<p style="margin-top: 5px;margin-bottom: 10px">然后再登录本地账户测试漏洞，这是一件多么蛋疼的事情，于是，基于这个问题，我开始分析为什么在域用户下该漏洞无法利用成功。</p>
<p style="margin-top: 5px;margin-bottom: 10px">当然，我在域用户下也测试过这个漏洞，当然，起初是不成功的。但利用PyKek是可以生成TGT_domainuser@SERVER.COM.ccache，并且mimikatz也可以将该文件写进缓存证书，也就是说TGT在域用户下可以被写入内存作为缓存证书。那问题出在哪里呢？net<br />
use命令肯定没问题，最终我把问题定位在了缓存证书上。</p>
<p style="margin-top: 5px;margin-bottom: 10px"><span style="color: rgb(0, 176, 80);"><strong>为什么这样说呢？是因为偶然的一次测试中，我发现了一个奇怪的现象：</strong></span></p>
<p style="margin-top: 5px;margin-bottom: 10px">在本地账户中没有使用mimikatz向内存注入缓存证书之前，其内存中的缓存证书个数为0，而用mimikatz注入之后，变成1个，net<br />
use之后，变为2个。</p>
<p style="margin-top: 5px;margin-bottom: 10px">也就是说，net<br />
use后会产生一个ServiceTicket被放进内存中。这点没有什么变化。</p>
<p style="margin-top: 5px;margin-bottom: 10px">而当我在域用户下做类似测试时，却惊奇地发现：</p>
<p style="margin-top: 5px;margin-bottom: 10px">在域用户中没有使用mimikatz向内存注入缓存证书之前，其内存中的缓存证书个数是4个，如下面：</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208944438493.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="z10.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208944438493.png!small" title="z10.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">而当我使用mimikatz注入缓存证书以后，变为：</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208944645018.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="z11.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208944645018.png!small" title="z11.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">可以发现，之后TGT改变了，后面的三个缓存证书没有改变（第二个就是net<br />
use所使用的Service<br />
Ticket）</p>
<p style="margin-top: 5px;margin-bottom: 10px">这里我突然又想到了缓存证书的作用：</p>
<p style="margin-top: 5px;margin-bottom: 10px"><span style="color: rgb(38, 38, 38);"><strong>net<br />
use之前，系统会从Credentials<br />
Cache中查看是否有ServiceTicket，如果没有则寻找TGT，找到后就发送给KDC申请ServiceTicket。</strong></span></p>
<p style="margin-top: 5px;margin-bottom: 10px">也就是说，mimikatz工具注入后，改变的是TGT，但net<br />
use使用的ServiceTicket没有被修改，还是域用户登录时生成的普通域用户权限的ServiceTicket，而根据对本地账户中测试的了解，起初内存中是没有net<br />
use的ServiceTicket对应的缓存证书的，而是注入后，net<br />
use重新生成的缓存证书。</p>
<p style="margin-top: 5px;margin-bottom: 10px">那关键就来了，有没有办法在域用户环境中清除net<br />
use需要用到的普通域用户权限的ServiceTicket对应的缓存证书，然后注入漏洞利用生成的高权限TGT，最后由net<br />
use重新生成一个高权限的ServiceTicket对应的缓存证书（本地账户漏洞利用过程就是这样的）？</p>
<p style="margin-top: 5px;margin-bottom: 10px">于是，我怀着好奇的心理，阅读了列举缓存证书的命令klist，果然发现：</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208944894961.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="z12.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208944894961.png!small" title="z12.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">果然发现purge这个单词，经Google翻译，为“清除”之意，心中窃喜，于是在域用户下使用该命令：</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208945096823.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="z13.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208945096823.png!small" title="z13.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px">果然，缓存证书被清空了，那接下来就好办了，再次利用mimikatz注入高权限TGT的缓存证书，然后执行：</p>
<p style="margin-top: 5px; margin-bottom: 10px; text-align: center;"><img data-original="http://image.3001.net/images/20150110/14208945282781.png!small" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="z14.png"/></p>
<noscript><img src="http://image.3001.net/images/20150110/14208945282781.png!small" title="z14.png"/></p></noscript>
<p style="margin-top: 5px;margin-bottom: 10px"><span style="color: rgb(38, 38, 38);"><strong>你会发现，在域用户下，该漏洞也是可以利用的！</strong></span></p>
<p style="margin-top: 5px;margin-bottom: 10px"><span style="color: rgb(255, 0, 0);"><strong>[本文作者walkerfuz，本文属FreeBuf黑客与极客（FreeBuf.COM）原创文章奖励计划，未经允许禁止转载]</strong></span></p>
                                                    </div>
                        <div class="article-oper article-oper-new">
                            <style>
                                @font-face {font-family: 'iconfont';
                                    src: url('http://static.3001.net/iconfonts/iconfont.eot'); /* IE9*/
                                    src: url('http://static.3001.net/iconfonts/iconfont.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
                                    url('http://static.3001.net/iconfonts/iconfont.woff') format('woff'), /* chrome、firefox */
                                    url('http://static.3001.net/iconfonts/iconfont.ttf') format('truetype'), /* chrome、firefox、opera、Safari, Android, iOS 4.2+*/
                                    url('http://static.3001.net/iconfonts/iconfont.svg#iconfont') format('svg'); /* iOS 4.1- */
                                }
                            </style>
                            <div class="share-new clearfix">
                                <div class="share-author">
                                                                            <a href="http://www.freebuf.com/author/walkerfuz" title="由 walkerfuz 发布" rel="author">
                                            <img src="http://image.3001.net/2015/01/redhat.png" width="50" height="50" alt="walkerfuz" class="avatar avatar-50 wp-user-avatar wp-user-avatar-50 photo" />                                            <!--							<img src="http://image.3001.net/2015/06/17.jpg" alt="ArthurKiller">-->
                                        </a>
                                        <div class="share-author-info">
                                                                                        <a class="author-name" href="http://www.freebuf.com/author/walkerfuz">walkerfuz</a>
                                            <!--<span class="icon-f"></span>-->
                                            <span>
                                <i class="colour-red">
                                    7                                </i>
                                篇文章</span>
                                            <span>等级：
                                <i class="colour-green">4</i>级
                            </span>
                                        </div>
                                                                                                        </div>
                                <div class="user-center clearfix">
                                                                            <a href="http://www.freebuf.com/author/walkerfuz" data-toggle="tooltip" data-placement="top" title="个人主页" class="home" target="_blank"></a>
                                                                        <a href="http://www.freebuf.com/user/pm?pmaction=newmessage&to=walkerfuz" data-toggle="tooltip" data-placement="top" title="私信" class="letter" target="_blank"></a>
                                </div>
                                <div class="share-ctrl clearfix">
                                                                        <div class="bdsharebuttonbox clearfix bdshare-button-style1-24 columnstatus"
                                         data-bd-bind="1489991449190" data-column="" data-title="深入解读MS14-068漏洞：微软精心策划的后门？" data-name="">
                                        <a href="#" data-toggle="tooltip" data-placement="top" data-cmd="tsina" title="分享到新浪微博" id="tsina"></a>
                                        <a href="#" data-toggle="tooltip" data-placement="top" data-cmd="weixin" title="分享到微信" id="weixin"></a>
                                        <a href="#" data-toggle="tooltip" data-placement="top" data-cmd="qzone" title="分享到QQ空间" id="qzone"></a>
                                       <!-- _shareUrlWeibo = 'http://service.weibo.com/share/share.php?url=http://'+encodeURIComponent(_json[i].url)+'&title='+encodeURIComponent(_json[i].title)+'-FreeBuf涓撴爮路'+_json[i].columnName;
                                        _shareUrlZone = 'http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://'+encodeURIComponent(_json[i].url)+'&title='+_json[i].title+'-FreeBuf涓撴爮路'+_json[i].columnName;
                                        _shareSrc = 'http://s.jiathis.com/qrcode.php?url=http://'+_json[i].url;-->
                                        <span class="share-line">|</span>
                                    </div>
                                </div>
                                <div class="user-ctrl clearfix">
                                                                            <a href="http://www.freebuf.com/oauth" id="collect" data-toggle="tooltip" data-placement="top" title="收藏" ></a>
                                                                        <a href="#respond" data-toggle="tooltip" data-placement="top" title="评论" id="comments"></a>
                                                                        <!--					<a href="#" title="文章纠正">&#xe6e3;</a>-->
                                    <span class="share-line">|</span>
                                    <span class="info-alert"></span>
                                </div>
                            </div>
                            <script>
                                var column = $('.columnstatus').attr('data-column');
                                var text = '';
                                if(column){
                                    var title = $('.columnstatus').attr('data-title');
                                    var name = $('.columnstatus').attr('data-name');
                                    text = title+' - FreeBuf专栏·'+name;
                                }
                                window._bd_share_config={
                                    "common": {
                                        "bdSnsKey": {},
                                        "bdText": text,
                                        "bdMini": "2",
                                        "bdMiniList": ["qzone", "tsina", "weixin"],
                                        "bdPic": "",
                                        "bdStyle": "1",
                                        "bdSize": "24"
                                    },
                                    "share":{},
                                };
                                with(document)0[
                                    (getElementsByTagName('head')[0]||body).
                                    appendChild(createElement('script')).
                                        src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)
                                    ];
                                //控制垂直方向分享模块的定位
                                function shareFixVertical(){
                                    var offsetTop = jQuery(".article-oper").get(0).offsetTop;
                                    var win_h = jQuery(window).height();
                                    var win_w = jQuery(window).width();
                                    var scrollTop = document.body.scrollTop||document.documentElement.scrollTop;
                                    var _height = offsetTop-scrollTop;
                                    var _flag = $('.column-article').attr('data-column');
                                    if(_flag == 1) {
                                        if(_height>=win_h-660&&win_w>975){
                                            var _width = jQuery("#getWidth").innerWidth()-30;
                                            var _left = jQuery("#getWidth").offset().left+15;
                                            jQuery(".share-new").addClass("fixed");
                                            jQuery(".fixed").css({
                                                width:_width,
                                                left:_left
                                            });

                                        }else{
                                            jQuery(".share-new").removeClass("fixed");
                                            jQuery(".share-new").css({
                                                width: "100%"
                                            });
                                        }
                                    }else {
                                        if(_height>=win_h-255&&win_w>975){
                                            var _width = jQuery("#getWidth").innerWidth()-30;
                                            var _left = jQuery("#getWidth").offset().left+15;
                                            jQuery(".share-new").addClass("fixed");
                                            jQuery(".fixed").css({
                                                width:_width,
                                                left:_left
                                            });

                                        }else{
                                            jQuery(".share-new").removeClass("fixed");
                                            jQuery(".share-new").css({
                                                width: "100%"
                                            });
                                        }
                                    }
                                }
                                //控制水平方向分享模块的定位
                                function shareFixHorizontal(){
                                    var _width = jQuery("#getWidth").innerWidth()-30;
                                    var _left = jQuery("#getWidth").get(0).offsetLeft+15;
                                    var win_w = document.documentElement.clientWidth || document.body.clientWidth;
                                    jQuery(".fixed").css({
                                        width:_width,
                                        left:_left
                                    });
                                    if(win_w< 975){
                                        jQuery(".share-new").css({
                                            width: "100%",
                                            left: "0"
                                        });
                                    }else{
                                        var _width = jQuery("#getWidth").innerWidth()-30;
                                        var _left = jQuery("#getWidth").get(0).offsetLeft+15;
                                        jQuery(".fixed").css({
                                            width:_width,
                                            left:_left
                                        });
                                    }
                                }
                                function click(){
                                    var _w = jQuery(window).width();
                                    jQuery(document).click(function(e){
                                        if(jQuery(e.target).attr("id")=="weixin"){
                                            if(_w <= 760) {
                                                jQuery("#bdshare_weixin_qrcode_dialog").hide();
                                                layer.open({
                                                    title: '提示',
                                                    btnAlign: 'c',
                                                    content: '请使用手机浏览器自带的分享功能分享该页面',
                                                    area: '260px'
                                                });
                                            }else {
                                                jQuery("#bdshare_weixin_qrcode_dialog").show();
                                            }
                                        }else {
                                            jQuery("#bdshare_weixin_qrcode_dialog").hide();
                                        }
                                    });
                                }

                                jQuery(window).on("load",function(){
                                    shareFixVertical();
                                    click();
                                });

                                jQuery(window).on("scroll",function(){
                                    //判断滚轮方向
                                    var agent = navigator.userAgent;
                                    if (/.*Firefox.*/.test(agent)) {
                                        document.addEventListener("DOMMouseScroll", function(e) {
                                            e = e || window.event;
                                            var detail = e.detail;
                                            if (detail > 0) {
                                                $(".share-new").removeClass("fixed");
                                                $(".share-new").css({
                                                    width: "100%"
                                                });
                                                $('.main-header .header').removeClass('op1');
                                                $('.main-header .header').addClass('op0');
                                            } else {
                                                shareFixVertical();
                                                $('.main-header .header').removeClass('op0');
                                                $('.main-header .header').addClass('op1');
                                            }
                                        });
                                    } else {
                                        document.onmousewheel = function(e) {
                                            e = e || window.event;
                                            var wheelDelta = e.wheelDelta;
                                            if (wheelDelta > 0) {
                                                shareFixVertical();
                                                $('.main-header .header').removeClass('op0');
                                                $('.main-header .header').addClass('op1');
                                            } else {
                                                $(".share-new").removeClass("fixed");
                                                $(".share-new").css({
                                                    width: "100%"
                                                });
                                                $('.main-header .header').removeClass('op1');
                                                $('.main-header .header').addClass('op0');
                                            }
                                        }
                                    }
                                });


                                jQuery(window).on("resize",function(){
                                    shareFixHorizontal();
                                    click();
                                })

                                //tooltips提示
                                $(function () { $("[data-toggle='tooltip']").tooltip(); });
                            </script>
                        </div>
                                                                                                                            <div class="article-pager ">
                                <ul>
                                    <li class="previous"><span>上一篇：</span><a href="http://www.freebuf.com/news/56074.html" rel="prev">华硕路由器曝远程命令执行漏洞</a>                                    </li>
                                    <li class="next"><span>下一篇：</span>
                                        <a href="http://www.freebuf.com/news/56328.html" rel="next">苹果OS X Yosemite系统曝多个本地提权漏洞</a>                                    </li>
                                </ul>
                            </div>
                                            </div>
                </div>
                    <div class="comment-bright"><div class="main-tit04">
    <h3>这些评论亮了</h3></div>      <ul>      <li>
            <div class="user_photo">             <img src="http://image.3001.net/images/headimg/pic9.png">             </div>
            <div class="tit"><span class="name"> cqdaidong </span> 
						<span class="explain"></span>
			<span class="reply"><a onclick="return addComment.moveForm( 'comment-','', 'respond','56081' ) " href="?replytocom=#respond" class="comment-reply-link" rel="nofollow">回复</a></span></div>
            <div class="txt">
						虽然看不懂楼主在说什么，但是隐隐约约感觉好牛逼得样子，一楼我占了</div>
            <div class="but"><span class="vote-count">)</span><span style="none" id="cos_support-261364" class="vote-count">105</span><span class="vote-count">(</span><span class="vote">  <a class="ilike_icon" id="vote4-261364" href="javascript:acv_vote(61364,1,2);">亮了</a></span></div>
          </li>
            <li>
            <div class="user_photo"> <a href="http://www.freebuf.com/author/walkerfuz">
            <img src="http://image.3001.net/2015/01/redhat.png" width="58" height="58" /></a>
             </div>
            <div class="tit"><span class="name"> <a href="http://www.freebuf.com/author/walkerfuz" target="_blank">walkerfuz</a>  </span> 
						<span class="icon-f">  </span> 
			<span class="rank">(4级)</span>
						<span class="explain">像风一样分析漏洞、挖漏洞的男子™</span>
			<span class="reply"><a onclick="return addComment.moveForm( 'comment-','', 'respond','56081' ) " href="?replytocom=#respond" class="comment-reply-link" rel="nofollow">回复</a></span></div>
            <div class="txt">
						小编，我生气了，我明明把所有代码花了一个小时全部换成图片了，你却用了我最初提交的版本</div>
            <div class="but"><span class="vote-count">)</span><span style="none" id="cos_support-261377" class="vote-count">75</span><span class="vote-count">(</span><span class="vote">  <a class="ilike_icon" id="vote4-261377" href="javascript:acv_vote(61377,1,2);">亮了</a></span></div>
          </li>
            <li>
            <div class="user_photo"> <a href="http://www.freebuf.com/author/gnaw0725">
            <img src="http://image.3001.net/2014/12/79392523_377520655.jpg" width="58" height="58" /></a>
             </div>
            <div class="tit"><span class="name"> <a href="http://www.freebuf.com/author/gnaw0725" target="_blank">gnaw0725</a>  </span> 
						<span class="icon-f">  </span> 
			<span class="rank">(1级)</span>
						<span class="explain">网络安全、活动目录、系统管理</span>
			<span class="reply"><a onclick="return addComment.moveForm( 'comment-','', 'respond','56081' ) " href="?replytocom=#respond" class="comment-reply-link" rel="nofollow">回复</a></span></div>
            <div class="txt">
						这么NB的分析，其实就一句话，OS安全架构在设计的时候，相关部门都参与了。</div>
            <div class="but"><span class="vote-count">)</span><span style="none" id="cos_support-261396" class="vote-count">24</span><span class="vote-count">(</span><span class="vote">  <a class="ilike_icon" id="vote4-261396" href="javascript:acv_vote(61396,1,2);">亮了</a></span></div>
          </li>
            <li>
            <div class="user_photo"> <a href="http://www.freebuf.com/author/p0tt1">
            <img src="http://image.3001.net/2014/09/boy_1.png" width="58" height="58" /></a>
             </div>
            <div class="tit"><span class="name"> <a href="http://www.freebuf.com/author/p0tt1" target="_blank">p0tt1</a>  </span> 
						<span class="icon-f">  </span> 
			<span class="rank">(6级)</span>
						<span class="explain">黑客叔叔，RainRaid和SniFFeR.Pro团队负责人</span>
			<span class="reply"><a onclick="return addComment.moveForm( 'comment-','', 'respond','56081' ) " href="?replytocom=#respond" class="comment-reply-link" rel="nofollow">回复</a></span></div>
            <div class="txt">
						任何地方都临时工的存在，而且更可怕的是，更多组织需要他们的存在.....<br/>所以，请say:<br/>哦..............................</div>
            <div class="but"><span class="vote-count">)</span><span style="none" id="cos_support-261398" class="vote-count">6</span><span class="vote-count">(</span><span class="vote">  <a class="ilike_icon" id="vote4-261398" href="javascript:acv_vote(61398,1,2);">亮了</a></span></div>
          </li>
         </ul></div><div class="comment-list">
      <div class="main-tit02">
		<a rel="nofollow" class="btnbtn-default btn-comment" href="#respond">发表评论</a>
        <h3>已有 <span class="color_red">68</span> 条评论
      </div>
      <ul>
         <li class="comment even thread-even depth-1" id="li-comment-61364">
    <div id="comment-61364">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic17.png">     </div>
    <div class="tit"> 
	    <span class="name"> cqdaidong </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-11</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61364','61364', 'respond','56081' ) " href="?replytocom=61364#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">1楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>虽然看不懂楼主在说什么，但是隐隐约约感觉好牛逼得样子，一楼我占了</p>
<div class="comment-tools">
<div class="vote" id="vote-61364"><span id="acv_stat_61364"></span><a class="ilike_icon"  id="vote4-61364" href="javascript:acv_vote(61364,1);">亮了</a>(<span id="cos_support-61364">105</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61364" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61364" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61364" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61364" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61364" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-14963 odd alt thread-odd thread-alt depth-1" id="li-comment-61365">
    <div id="comment-61365">
        <div class="photo"> <a href="http://www.freebuf.com/author/酱油党">
    <img src="http://www.freebuf.com/buf/plugins/wp-user-avatar/images/wp-user-avatar-96x96.png"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/酱油党" target="_blank">酱油党&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(2级)</span>
				<span class="explain"> 禁止发言 </span>
		<span class="time">&nbsp;2015-01-11</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61365','61365', 'respond','56081' ) " href="?replytocom=61365#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">2楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>虽然看不懂楼主在说什么，但是隐隐约约感觉好牛逼得样子</p>
<div class="comment-tools">
<div class="vote" id="vote-61365"><span id="acv_stat_61365"></span><a class="ilike_icon"  id="vote4-61365" href="javascript:acv_vote(61365,1);">亮了</a>(<span id="cos_support-61365">5</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61365" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61365" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61365" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61365" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61365" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-foxhack even thread-even depth-1" id="li-comment-61366">
    <div id="comment-61366">
        <div class="photo"> <a href="http://www.freebuf.com/author/foxhack">
    <img src="http://www.freebuf.com/buf/plugins/wp-user-avatar/images/wp-user-avatar-96x96.png"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/foxhack" target="_blank">foxhack&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(1级)</span>
				<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-11</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61366','61366', 'respond','56081' ) " href="?replytocom=61366#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">3楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>大赞~~~那么问题来了，还有多少后门没有被发现呢？</p>
<div class="comment-tools">
<div class="vote" id="vote-61366"><span id="acv_stat_61366"></span><a class="ilike_icon"  id="vote4-61366" href="javascript:acv_vote(61366,1);">亮了</a>(<span id="cos_support-61366">4</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61366" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61366" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61366" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61366" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61366" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-Todaro odd alt thread-odd thread-alt depth-1" id="li-comment-61368">
    <div id="comment-61368">
        <div class="photo"> <a href="http://www.freebuf.com/author/Todaro">
    <img src="http://www.freebuf.com/buf/plugins/wp-user-avatar/images/wp-user-avatar-96x96.png"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/Todaro" target="_blank">Todaro.&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(2级)</span>
				<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-11</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61368','61368', 'respond','56081' ) " href="?replytocom=61368#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">4楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>小编你上传的时候，语序错字能稍微改一下吗，我能理解你想快点让我们看到这篇好文章的激动，但是某些换行，看了很别扭。</p>
<div class="comment-tools">
<div class="vote" id="vote-61368"><span id="acv_stat_61368"></span><a class="ilike_icon"  id="vote4-61368" href="javascript:acv_vote(61368,1);">亮了</a>(<span id="cos_support-61368">5</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61368" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61368" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61368" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61368" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61368" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-61375">
    <div id="comment-61375">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic15.png">     </div>
    <div class="tit"> 
	    <span class="name"> 一个绅士 </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-11</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61375','61375', 'respond','56081' ) " href="?replytocom=61375#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">5楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>虽然不知道在讲什么，但是感觉很长的样子。</p>
<div class="comment-tools">
<div class="vote" id="vote-61375"><span id="acv_stat_61375"></span><a class="ilike_icon"  id="vote4-61375" href="javascript:acv_vote(61375,1);">亮了</a>(<span id="cos_support-61375">3</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61375" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61375" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61375" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61375" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61375" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-walkerfuz bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-61377">
    <div id="comment-61377">
        <div class="photo"> <a href="http://www.freebuf.com/author/walkerfuz">
    <img src="http://image.3001.net/2015/01/redhat.png"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/walkerfuz" target="_blank">walkerfuz&nbsp;</a>  </span>
        		
		<span class="icon-f"> <a href="http://zhuanlan.freebuf.com" target="_blank"><img src="http://image.3001.net/images/index/column-iden.png" title="专栏作者"></a></span>
		<span class="rank">(4级)</span>
				<span class="explain"> 像风一样分析漏洞、挖漏洞的男子™ </span>
		<span class="time">&nbsp;2015-01-11</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61377','61377', 'respond','56081' ) " href="?replytocom=61377#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">6楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>小编，我生气了，我明明把所有代码花了一个小时全部换成图片了，你却用了我最初提交的版本</p>
<div class="comment-tools">
<div class="vote" id="vote-61377"><span id="acv_stat_61377"></span><a class="ilike_icon"  id="vote4-61377" href="javascript:acv_vote(61377,1);">亮了</a>(<span id="cos_support-61377">75</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61377" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61377" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61377" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61377" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61377" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-61378">
    <div id="comment-61378">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic16.png">     </div>
    <div class="tit"> 
	    <span class="name"> ssdf </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-11</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61378','61378', 'respond','56081' ) " href="?replytocom=61378#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">7楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>域控打补丁一般都还是比较积极的，当然现实中确实有那中几百年都没人登的域控。。。。。</p>
<div class="comment-tools">
<div class="vote" id="vote-61378"><span id="acv_stat_61378"></span><a class="ilike_icon"  id="vote4-61378" href="javascript:acv_vote(61378,1);">亮了</a>(<span id="cos_support-61378">5</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61378" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61378" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61378" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61378" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61378" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-17036 odd alt thread-odd thread-alt depth-1" id="li-comment-61392">
    <div id="comment-61392">
        <div class="photo"> <a href="http://www.freebuf.com/author/夜尽天明">
    <img src="http://image.3001.net/images/20170303/1488514201342.jpg!video"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/夜尽天明" target="_blank">夜尽天明&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(5级)</span>
				<span class="explain"> 千秋邈矣独留我，百战归来再读书 </span>
		<span class="time">&nbsp;2015-01-12</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61392','61392', 'respond','56081' ) " href="?replytocom=61392#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">8楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p> <img src='http://image.3001.net/images/index/smilies/icon_smile.gif' alt=':smile:' class='wp-smiley' />  好文章，分析的很好，虽然我看不懂</p>
<div class="comment-tools">
<div class="vote" id="vote-61392"><span id="acv_stat_61392"></span><a class="ilike_icon"  id="vote4-61392" href="javascript:acv_vote(61392,1);">亮了</a>(<span id="cos_support-61392">4</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61392" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61392" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61392" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61392" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61392" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-61395">
    <div id="comment-61395">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic16.png">     </div>
    <div class="tit"> 
	    <span class="name"> 微雨独行 </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-12</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61395','61395', 'respond','56081' ) " href="?replytocom=61395#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">9楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>这对于忘记域管理密码的人来说是个福音&#8230;.</p>
<div class="comment-tools">
<div class="vote" id="vote-61395"><span id="acv_stat_61395"></span><a class="ilike_icon"  id="vote4-61395" href="javascript:acv_vote(61395,1);">亮了</a>(<span id="cos_support-61395">5</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61395" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61395" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61395" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61395" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61395" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-gnaw0725 odd alt thread-odd thread-alt depth-1" id="li-comment-61396">
    <div id="comment-61396">
        <div class="photo"> <a href="http://www.freebuf.com/author/gnaw0725">
    <img src="http://image.3001.net/2014/12/79392523_377520655.jpg"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/gnaw0725" target="_blank">gnaw0725&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(1级)</span>
				<span class="explain"> 网络安全、活动目录、系统管理 </span>
		<span class="time">&nbsp;2015-01-12</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61396','61396', 'respond','56081' ) " href="?replytocom=61396#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">10楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>这么NB的分析，其实就一句话，OS安全架构在设计的时候，相关部门都参与了。</p>
<div class="comment-tools">
<div class="vote" id="vote-61396"><span id="acv_stat_61396"></span><a class="ilike_icon"  id="vote4-61396" href="javascript:acv_vote(61396,1);">亮了</a>(<span id="cos_support-61396">24</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61396" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61396" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61396" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61396" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61396" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-61397">
    <div id="comment-61397">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic6.png">     </div>
    <div class="tit"> 
	    <span class="name"> 比尔盖茨 </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-12</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61397','61397', 'respond','56081' ) " href="?replytocom=61397#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">11楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>年轻人你分析得很对，很专业，虽然我没看懂。</p>
<div class="comment-tools">
<div class="vote" id="vote-61397"><span id="acv_stat_61397"></span><a class="ilike_icon"  id="vote4-61397" href="javascript:acv_vote(61397,1);">亮了</a>(<span id="cos_support-61397">5</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61397" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61397" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61397" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61397" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61397" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-p0tt1 odd alt thread-odd thread-alt depth-1" id="li-comment-61398">
    <div id="comment-61398">
        <div class="photo"> <a href="http://www.freebuf.com/author/p0tt1">
    <img src="http://image.3001.net/2014/09/boy_1.png"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/p0tt1" target="_blank">p0tt1&nbsp;</a>  </span>
        		
		<span class="icon-f"> <a href="http://www.freebuf.com/bufer" target="_blank"><img src="http://image.3001.net/images/index/f1.png" title="认证作者"></a></span>
		<span class="rank">(6级)</span>
				<span class="explain"> 黑客叔叔，RainRaid和SniFFeR.Pro团队负责人 </span>
		<span class="time">&nbsp;2015-01-12</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61398','61398', 'respond','56081' ) " href="?replytocom=61398#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">12楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>任何地方都临时工的存在，而且更可怕的是，更多组织需要他们的存在&#8230;..<br />
所以，请say:<br />
哦&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;&#8230;</p>
<div class="comment-tools">
<div class="vote" id="vote-61398"><span id="acv_stat_61398"></span><a class="ilike_icon"  id="vote4-61398" href="javascript:acv_vote(61398,1);">亮了</a>(<span id="cos_support-61398">6</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61398" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61398" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61398" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61398" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61398" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-pythonjack even thread-even depth-1" id="li-comment-61403">
    <div id="comment-61403">
        <div class="photo"> <a href="http://www.freebuf.com/author/pythonjack">
    <img src="http://image.3001.net/2015/01/junyong29.jpg"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/pythonjack" target="_blank">pythonjack&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(1级)</span>
				<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-12</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61403','61403', 'respond','56081' ) " href="?replytocom=61403#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">13楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>这货好干，营养多 吸收了</p>
<div class="comment-tools">
<div class="vote" id="vote-61403"><span id="acv_stat_61403"></span><a class="ilike_icon"  id="vote4-61403" href="javascript:acv_vote(61403,1);">亮了</a>(<span id="cos_support-61403">4</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61403" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61403" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61403" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61403" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61403" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-idhyt odd alt thread-odd thread-alt depth-1" id="li-comment-61404">
    <div id="comment-61404">
        <div class="photo"> <a href="http://www.freebuf.com/author/idhyt">
    <img src="http://www.freebuf.com/buf/plugins/wp-user-avatar/images/wp-user-avatar-96x96.png"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/idhyt" target="_blank">idhyt&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(2级)</span>
				<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-12</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61404','61404', 'respond','56081' ) " href="?replytocom=61404#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">14楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>这代码排版起码去掉了我继续看下去80%的兴趣，虽然只有81%的兴趣。。</p>
<div class="comment-tools">
<div class="vote" id="vote-61404"><span id="acv_stat_61404"></span><a class="ilike_icon"  id="vote4-61404" href="javascript:acv_vote(61404,1);">亮了</a>(<span id="cos_support-61404">3</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61404" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61404" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61404" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61404" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61404" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
<ul class="children">
<li class="comment byuser comment-author-rechange even depth-2" id="li-comment-61421">
    <div id="comment-61421">
        <div class="photo"> <a href="http://www.freebuf.com/author/Rechange">
    <img src="http://image.3001.net/2015/05/image2015_4_12_15_40_34.jpg"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/Rechange" target="_blank">Rechange&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(6级)</span>
				<span class="explain"> 关注网络安全、智能硬件 </span>
		<span class="time">&nbsp;2015-01-12</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61421','61421', 'respond','56081' ) " href="?replytocom=61421#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor"></span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>@ idhyt    代码已经重新排版~</p>
<div class="comment-tools">
<div class="vote" id="vote-61421"><span id="acv_stat_61421"></span><a class="ilike_icon"  id="vote4-61421" href="javascript:acv_vote(61421,1);">亮了</a>(<span id="cos_support-61421">5</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61421" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61421" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61421" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61421" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61421" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment byuser comment-author-jacker odd alt thread-even depth-1" id="li-comment-61411">
    <div id="comment-61411">
        <div class="photo"> <a href="http://www.freebuf.com/author/jacker">
    <img src="http://image.3001.net/2013/09/20130927164241.jpg"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/jacker" target="_blank">jacker&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(6级)</span>
				<span class="explain"> Ubuntu  Arch   Vim爱好者 </span>
		<span class="time">&nbsp;2015-01-12</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61411','61411', 'respond','56081' ) " href="?replytocom=61411#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">15楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>楼主分析很详细</p>
<div class="comment-tools">
<div class="vote" id="vote-61411"><span id="acv_stat_61411"></span><a class="ilike_icon"  id="vote4-61411" href="javascript:acv_vote(61411,1);">亮了</a>(<span id="cos_support-61411">3</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61411" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61411" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61411" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61411" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61411" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-walkerfuz bypostauthor even thread-odd thread-alt depth-1" id="li-comment-61417">
    <div id="comment-61417">
        <div class="photo"> <a href="http://www.freebuf.com/author/walkerfuz">
    <img src="http://image.3001.net/2015/01/redhat.png"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/walkerfuz" target="_blank">walkerfuz&nbsp;</a>  </span>
        		
		<span class="icon-f"> <a href="http://zhuanlan.freebuf.com" target="_blank"><img src="http://image.3001.net/images/index/column-iden.png" title="专栏作者"></a></span>
		<span class="rank">(4级)</span>
				<span class="explain"> 像风一样分析漏洞、挖漏洞的男子™ </span>
		<span class="time">&nbsp;2015-01-12</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61417','61417', 'respond','56081' ) " href="?replytocom=61417#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">16楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>@ walkerfuz   小编真的很细心，代码排版问题已解决，感谢！我会再接再厉的！</p>
<div class="comment-tools">
<div class="vote" id="vote-61417"><span id="acv_stat_61417"></span><a class="ilike_icon"  id="vote4-61417" href="javascript:acv_vote(61417,1);">亮了</a>(<span id="cos_support-61417">4</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61417" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61417" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61417" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61417" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61417" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
<ul class="children">
<li class="comment byuser comment-author-rechange odd alt depth-2" id="li-comment-61419">
    <div id="comment-61419">
        <div class="photo"> <a href="http://www.freebuf.com/author/Rechange">
    <img src="http://image.3001.net/2015/05/image2015_4_12_15_40_34.jpg"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/Rechange" target="_blank">Rechange&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(6级)</span>
				<span class="explain"> 关注网络安全、智能硬件 </span>
		<span class="time">&nbsp;2015-01-12</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61419','61419', 'respond','56081' ) " href="?replytocom=61419#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor"></span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>@ walkerfuz    非常感谢您的理解和支持~尽情的将您的稿件砸过来吧 <img src='http://image.3001.net/images/index/smilies/icon_mrgreen.gif' alt=':mrgreen:' class='wp-smiley' /> </p>
<div class="comment-tools">
<div class="vote" id="vote-61419"><span id="acv_stat_61419"></span><a class="ilike_icon"  id="vote4-61419" href="javascript:acv_vote(61419,1);">亮了</a>(<span id="cos_support-61419">5</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61419" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61419" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61419" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61419" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61419" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-61418">
    <div id="comment-61418">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic2.png">     </div>
    <div class="tit"> 
	    <span class="name"> cainiao </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-12</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61418','61418', 'respond','56081' ) " href="?replytocom=61418#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">17楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>亲测，域账号登录，直接利用漏洞，不用切换本地用户</p>
<div class="comment-tools">
<div class="vote" id="vote-61418"><span id="acv_stat_61418"></span><a class="ilike_icon"  id="vote4-61418" href="javascript:acv_vote(61418,1);">亮了</a>(<span id="cos_support-61418">3</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61418" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61418" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61418" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61418" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61418" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-61420">
    <div id="comment-61420">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic15.png">     </div>
    <div class="tit"> 
	    <span class="name"> jabberwork </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-12</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61420','61420', 'respond','56081' ) " href="?replytocom=61420#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">18楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>文章写得太棒了，直接可以拿去当论文投稿了，学习了好多东西！</p>
<div class="comment-tools">
<div class="vote" id="vote-61420"><span id="acv_stat_61420"></span><a class="ilike_icon"  id="vote4-61420" href="javascript:acv_vote(61420,1);">亮了</a>(<span id="cos_support-61420">3</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61420" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61420" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61420" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61420" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61420" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-qqf0397ef14df86e75f6a05cd67a5e8771 even thread-even depth-1" id="li-comment-61429">
    <div id="comment-61429">
        <div class="photo"> <a href="http://www.freebuf.com/author/QQF0397EF14DF86E75F6A05CD67A5E8771">
    <img src="http://image.3001.net/2014/10/u24258302113607613158fm56.jpg"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/QQF0397EF14DF86E75F6A05CD67A5E8771" target="_blank">三维码&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(1级)</span>
				<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-12</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61429','61429', 'respond','56081' ) " href="?replytocom=61429#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">19楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p><a href=http://image.3001.net/images/20150110/14208226253643.png target="_blank" title="" data_ue_src=http://image.3001.net/images/20150110/14208226253643.png class="highslide-image" onclick="return hs.expand(this);"><strong style="color: rgb(38, 38, 38);"></strong><strong><img data-original=http://image.3001.net/images/20150110/14208226253643.png data-original="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif"/></strong></a></p>
<noscript><img data-original=http://image.3001.net/images/20150110/14208226253643.png src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif"/></noscript>
<p>lz在这幅图“整个Kerberos协议大体框架”的第4步骤是否有错误？<br />
第二项的Service Ticket中是否应该为Encrypted SessionKey a-b By Server Password,而不是Encrypted SessionKey a-kdc By Server Password<br />
当然也有第5步骤的Service Ticket也要修改成Encrypted SessionKey a-b By Server Password。<br />
另：十分感谢lz分析</p>
<div class="comment-tools">
<div class="vote" id="vote-61429"><span id="acv_stat_61429"></span><a class="ilike_icon"  id="vote4-61429" href="javascript:acv_vote(61429,1);">亮了</a>(<span id="cos_support-61429">4</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61429" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61429" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61429" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61429" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61429" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
<ul class="children">
<li class="comment byuser comment-author-walkerfuz bypostauthor odd alt depth-2" id="li-comment-61474">
    <div id="comment-61474">
        <div class="photo"> <a href="http://www.freebuf.com/author/walkerfuz">
    <img src="http://image.3001.net/2015/01/redhat.png"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/walkerfuz" target="_blank">walkerfuz&nbsp;</a>  </span>
        		
		<span class="icon-f"> <a href="http://zhuanlan.freebuf.com" target="_blank"><img src="http://image.3001.net/images/index/column-iden.png" title="专栏作者"></a></span>
		<span class="rank">(4级)</span>
				<span class="explain"> 像风一样分析漏洞、挖漏洞的男子™ </span>
		<span class="time">&nbsp;2015-01-12</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61474','61474', 'respond','56081' ) " href="?replytocom=61474#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor"></span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>@ 三维码    恩，是我写文章时的疏忽，感谢指出，大家看文章时注意一些，抱歉，图片不知道小编能不能改，我去联系一下。</p>
<div class="comment-tools">
<div class="vote" id="vote-61474"><span id="acv_stat_61474"></span><a class="ilike_icon"  id="vote4-61474" href="javascript:acv_vote(61474,1);">亮了</a>(<span id="cos_support-61474">4</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61474" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61474" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61474" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61474" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61474" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
<ul class="children">
<li class="comment byuser comment-author-qqf0397ef14df86e75f6a05cd67a5e8771 even depth-3" id="li-comment-61512">
    <div id="comment-61512">
        <div class="photo"> <a href="http://www.freebuf.com/author/QQF0397EF14DF86E75F6A05CD67A5E8771">
    <img src="http://image.3001.net/2014/10/u24258302113607613158fm56.jpg"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/QQF0397EF14DF86E75F6A05CD67A5E8771" target="_blank">三维码&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(1级)</span>
				<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-13</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		           <a onclick="return addComment.moveForm( 'comment-61512','61474', 'respond','56081' )" href="?replytocom=61512#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor"></span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>@ walkerfuz    但也侧面证明了图是你自己做的~赞一个</p>
<div class="comment-tools">
<div class="vote" id="vote-61512"><span id="acv_stat_61512"></span><a class="ilike_icon"  id="vote4-61512" href="javascript:acv_vote(61512,1);">亮了</a>(<span id="cos_support-61512">1</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61512" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61512" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61512" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61512" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61512" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment odd alt depth-3" id="li-comment-61560">
    <div id="comment-61560">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic7.png">     </div>
    <div class="tit"> 
	    <span class="name"> walkerfuz </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-13</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		           <a onclick="return addComment.moveForm( 'comment-61560','61474', 'respond','56081' )" href="?replytocom=61560#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor"></span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>@ 三维码    错误图片已更正！</p>
<div class="comment-tools">
<div class="vote" id="vote-61560"><span id="acv_stat_61560"></span><a class="ilike_icon"  id="vote4-61560" href="javascript:acv_vote(61560,1);">亮了</a>(<span id="cos_support-61560">1</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61560" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61560" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61560" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61560" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61560" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment even thread-odd thread-alt depth-1" id="li-comment-61438">
    <div id="comment-61438">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic10.png">     </div>
    <div class="tit"> 
	    <span class="name"> jabberwork </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-12</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61438','61438', 'respond','56081' ) " href="?replytocom=61438#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">20楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>@walkerfuz 从你给出的kerberos协议实现的原理图来看想到了两个问题，请教一下：<br />
1、虽然用timestamp代替明文是安全了一点，但如果client_a的password是固定不变的，那攻击者只要实现与kerberos体系中计算机的时间同步（应该不难），然后截取认证过程中的第一步：client_a向AS发送的KRB_AS_REQ包，配合已知的timestamp，不就有可能破解出client_a的password了吗？<br />
2、KDC虽然必须对client_a进行验证，但似乎没有必要分成AS和TGS两部分，分成AS和TGS两部分，似乎纯粹是了为实现AS和TGS能够在物理上处于不同的主机而做的设计。</p>
<div class="comment-tools">
<div class="vote" id="vote-61438"><span id="acv_stat_61438"></span><a class="ilike_icon"  id="vote4-61438" href="javascript:acv_vote(61438,1);">亮了</a>(<span id="cos_support-61438">2</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61438" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61438" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61438" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61438" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61438" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
<ul class="children">
<li class="comment byuser comment-author-walkerfuz bypostauthor odd alt depth-2" id="li-comment-61443">
    <div id="comment-61443">
        <div class="photo"> <a href="http://www.freebuf.com/author/walkerfuz">
    <img src="http://image.3001.net/2015/01/redhat.png"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/walkerfuz" target="_blank">walkerfuz&nbsp;</a>  </span>
        		
		<span class="icon-f"> <a href="http://zhuanlan.freebuf.com" target="_blank"><img src="http://image.3001.net/images/index/column-iden.png" title="专栏作者"></a></span>
		<span class="rank">(4级)</span>
				<span class="explain"> 像风一样分析漏洞、挖漏洞的男子™ </span>
		<span class="time">&nbsp;2015-01-12</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61443','61443', 'respond','56081' ) " href="?replytocom=61443#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor"></span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>@ jabberwork  （1）关于timestamp的生成，从PyKek源码的分析来看：<br />
def build_pa_enc_timestamp(current_time, key):<br />
  pa_ts['cipher'] = encrypt(key[0], key[1], 1, encode(pa_ts_enc))<br />
&#8211;&gt; chksum = encrypted[:16]   data = encrypted[16:]<br />
    k1 = HMAC.new(key, pack(&#8216;&lt;I&#8217;, msg_type)).digest()  k3 = HMAC.new(k1, chksum).digest()<br />
    data = ARC4.new(k3).decrypt(data)<br />
采用的是HMAC带Key的签名，并且这个时间它取得是microseconds级别，所以要想不差分毫地逆向得到client_a的password几乎是不可能的<br />
（2）关于KDC分为AS和TGS这两部分，我的理解是，AS阶段生成TGT，TGS阶段生成Service Ticket，而自从Win7之后，微软开始支持向内存中注入缓存证书了，所以你可以讲生成的TGT或者TGS拷贝到其它机器的，也可以理解成为不同物理位置的主机提供一种不需要密码的认证，直接导入缓存证书，OK！</p>
<div class="comment-tools">
<div class="vote" id="vote-61443"><span id="acv_stat_61443"></span><a class="ilike_icon"  id="vote4-61443" href="javascript:acv_vote(61443,1);">亮了</a>(<span id="cos_support-61443">2</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61443" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61443" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61443" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61443" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61443" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-wordexp even depth-2" id="li-comment-146509">
    <div id="comment-146509">
        <div class="photo"> <a href="http://www.freebuf.com/author/wordexp">
    <img src="http://www.freebuf.com/buf/plugins/wp-user-avatar/images/wp-user-avatar-96x96.png"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/wordexp" target="_blank">wordexp&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(1级)</span>
				<span class="explain">  </span>
		<span class="time">&nbsp;2015-11-28</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-146509','146509', 'respond','56081' ) " href="?replytocom=146509#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor"></span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>解出来也只是HASH，不是明文密码</p>
<div class="comment-tools">
<div class="vote" id="vote-146509"><span id="acv_stat_146509"></span><a class="ilike_icon"  id="vote4-146509" href="javascript:acv_vote(146509,1);">亮了</a>(<span id="cos_support-146509">0</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="146509" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="146509" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="146509" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="146509" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="146509" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment byuser comment-author-juice_wu odd alt thread-even depth-1" id="li-comment-61451">
    <div id="comment-61451">
        <div class="photo"> <a href="http://www.freebuf.com/author/juice_wu">
    <img src="http://www.freebuf.com/buf/plugins/wp-user-avatar/images/wp-user-avatar-96x96.png"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/juice_wu" target="_blank">juice_wu&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(1级)</span>
				<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-12</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61451','61451', 'respond','56081' ) " href="?replytocom=61451#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">21楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>希望两个月后能看懂。。先收了。</p>
<div class="comment-tools">
<div class="vote" id="vote-61451"><span id="acv_stat_61451"></span><a class="ilike_icon"  id="vote4-61451" href="javascript:acv_vote(61451,1);">亮了</a>(<span id="cos_support-61451">2</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61451" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61451" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61451" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61451" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61451" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment even thread-odd thread-alt depth-1" id="li-comment-61453">
    <div id="comment-61453">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic9.png">     </div>
    <div class="tit"> 
	    <span class="name"> 不愿透露性别的王先生 </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-12</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61453','61453', 'respond','56081' ) " href="?replytocom=61453#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">22楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>看到这么牛逼的文章,我不由自主的装逼一下,嗯,好文章.</p>
<div class="comment-tools">
<div class="vote" id="vote-61453"><span id="acv_stat_61453"></span><a class="ilike_icon"  id="vote4-61453" href="javascript:acv_vote(61453,1);">亮了</a>(<span id="cos_support-61453">1</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61453" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61453" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61453" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61453" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61453" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-nilin odd alt thread-even depth-1" id="li-comment-61470">
    <div id="comment-61470">
        <div class="photo"> <a href="http://www.freebuf.com/author/nilin">
    <img src="http://www.freebuf.com/buf/plugins/wp-user-avatar/images/wp-user-avatar-96x96.png"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/nilin" target="_blank">nilin&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(4级)</span>
				<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-12</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61470','61470', 'respond','56081' ) " href="?replytocom=61470#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">23楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>感觉高大上  瞬间跪拜</p>
<div class="comment-tools">
<div class="vote" id="vote-61470"><span id="acv_stat_61470"></span><a class="ilike_icon"  id="vote4-61470" href="javascript:acv_vote(61470,1);">亮了</a>(<span id="cos_support-61470">2</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61470" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61470" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61470" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61470" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61470" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-ashely even thread-odd thread-alt depth-1" id="li-comment-61488">
    <div id="comment-61488">
        <div class="photo"> <a href="http://www.freebuf.com/author/Ashely">
    <img src="http://www.freebuf.com/buf/plugins/wp-user-avatar/images/wp-user-avatar-96x96.png"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/Ashely" target="_blank">Ashely&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(1级)</span>
				<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-12</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61488','61488', 'respond','56081' ) " href="?replytocom=61488#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">24楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>请问为什么直接在执行ms14-068.py时候报错 &quot;invalid syntax&quot;</p>
<div class="comment-tools">
<div class="vote" id="vote-61488"><span id="acv_stat_61488"></span><a class="ilike_icon"  id="vote4-61488" href="javascript:acv_vote(61488,1);">亮了</a>(<span id="cos_support-61488">2</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61488" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61488" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61488" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61488" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61488" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-4wphead odd alt thread-even depth-1" id="li-comment-61491">
    <div id="comment-61491">
        <div class="photo"> <a href="http://www.freebuf.com/author/4wp@head">
    <img src="http://www.freebuf.com/buf/plugins/wp-user-avatar/images/wp-user-avatar-96x96.png"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/4wp@head" target="_blank">4wp@head&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(1级)</span>
				<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-12</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61491','61491', 'respond','56081' ) " href="?replytocom=61491#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">25楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>难道这就是传说中的秒域原理 <img src='http://image.3001.net/images/index/smilies/icon_rolleyes.gif' alt=':roll:' class='wp-smiley' /> </p>
<div class="comment-tools">
<div class="vote" id="vote-61491"><span id="acv_stat_61491"></span><a class="ilike_icon"  id="vote4-61491" href="javascript:acv_vote(61491,1);">亮了</a>(<span id="cos_support-61491">1</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61491" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61491" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61491" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61491" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61491" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-aurora even thread-odd thread-alt depth-1" id="li-comment-61498">
    <div id="comment-61498">
        <div class="photo"> <a href="http://www.freebuf.com/author/Aurora">
    <img src="http://www.freebuf.com/buf/plugins/wp-user-avatar/images/wp-user-avatar-96x96.png"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/Aurora" target="_blank">Aurora&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(4级)</span>
				<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-12</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61498','61498', 'respond','56081' ) " href="?replytocom=61498#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">26楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>我还是看不懂说的啥玩意～</p>
<div class="comment-tools">
<div class="vote" id="vote-61498"><span id="acv_stat_61498"></span><a class="ilike_icon"  id="vote4-61498" href="javascript:acv_vote(61498,1);">亮了</a>(<span id="cos_support-61498">1</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61498" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61498" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61498" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61498" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61498" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment odd alt thread-even depth-1" id="li-comment-61501">
    <div id="comment-61501">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic9.png">     </div>
    <div class="tit"> 
	    <span class="name"> 24l </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-12</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61501','61501', 'respond','56081' ) " href="?replytocom=61501#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">27楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>干货真心干</p>
<div class="comment-tools">
<div class="vote" id="vote-61501"><span id="acv_stat_61501"></span><a class="ilike_icon"  id="vote4-61501" href="javascript:acv_vote(61501,1);">亮了</a>(<span id="cos_support-61501">1</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61501" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61501" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61501" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61501" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61501" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment even thread-odd thread-alt depth-1" id="li-comment-61601">
    <div id="comment-61601">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic18.png">     </div>
    <div class="tit"> 
	    <span class="name"> 无名氏 </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-13</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61601','61601', 'respond','56081' ) " href="?replytocom=61601#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">28楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>所以说国产系统是很有必要的</p>
<div class="comment-tools">
<div class="vote" id="vote-61601"><span id="acv_stat_61601"></span><a class="ilike_icon"  id="vote4-61601" href="javascript:acv_vote(61601,1);">亮了</a>(<span id="cos_support-61601">1</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61601" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61601" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61601" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61601" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61601" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-lixupeng odd alt thread-even depth-1" id="li-comment-61615">
    <div id="comment-61615">
        <div class="photo"> <a href="http://www.freebuf.com/author/lixupeng">
    <img src="http://www.freebuf.com/buf/plugins/wp-user-avatar/images/wp-user-avatar-96x96.png"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/lixupeng" target="_blank">lixupeng&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(4级)</span>
				<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-13</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61615','61615', 'respond','56081' ) " href="?replytocom=61615#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">29楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>收下！！</p>
<div class="comment-tools">
<div class="vote" id="vote-61615"><span id="acv_stat_61615"></span><a class="ilike_icon"  id="vote4-61615" href="javascript:acv_vote(61615,1);">亮了</a>(<span id="cos_support-61615">1</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61615" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61615" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61615" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61615" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61615" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-ashely even thread-odd thread-alt depth-1" id="li-comment-61660">
    <div id="comment-61660">
        <div class="photo"> <a href="http://www.freebuf.com/author/Ashely">
    <img src="http://www.freebuf.com/buf/plugins/wp-user-avatar/images/wp-user-avatar-96x96.png"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/Ashely" target="_blank">Ashely&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(1级)</span>
				<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-14</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61660','61660', 'respond','56081' ) " href="?replytocom=61660#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">30楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>不行啊，还是没测通，插入tickets成功后net use 爆密码不正确，求解@walkerfuz</p>
<div class="comment-tools">
<div class="vote" id="vote-61660"><span id="acv_stat_61660"></span><a class="ilike_icon"  id="vote4-61660" href="javascript:acv_vote(61660,1);">亮了</a>(<span id="cos_support-61660">1</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61660" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61660" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61660" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61660" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61660" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
<ul class="children">
<li class="comment byuser comment-author-angellover08 odd alt depth-2" id="li-comment-61662">
    <div id="comment-61662">
        <div class="photo"> <a href="http://www.freebuf.com/author/angellover08">
    <img src="http://www.freebuf.com/buf/plugins/wp-user-avatar/images/wp-user-avatar-96x96.png"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/angellover08" target="_blank">angellover08&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(4级)</span>
				<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-14</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61662','61662', 'respond','56081' ) " href="?replytocom=61662#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor"></span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>@ Ashely    net group &quot;domain admins&quot; domainuser /add /domain</p>
<div class="comment-tools">
<div class="vote" id="vote-61662"><span id="acv_stat_61662"></span><a class="ilike_icon"  id="vote4-61662" href="javascript:acv_vote(61662,1);">亮了</a>(<span id="cos_support-61662">1</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61662" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61662" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61662" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61662" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61662" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment even thread-even depth-1" id="li-comment-61771">
    <div id="comment-61771">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic4.png">     </div>
    <div class="tit"> 
	    <span class="name"> ronnie </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-15</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61771','61771', 'respond','56081' ) " href="?replytocom=61771#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">31楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>DC:2008R2  PC:win8  本地用户执行net use 时报需要用户名密码，域用户执行成功 ，但是\\dc.com\c$显示文件夹为空</p>
<div class="comment-tools">
<div class="vote" id="vote-61771"><span id="acv_stat_61771"></span><a class="ilike_icon"  id="vote4-61771" href="javascript:acv_vote(61771,1);">亮了</a>(<span id="cos_support-61771">0</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61771" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61771" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61771" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61771" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61771" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
<ul class="children">
<li class="comment odd alt depth-2" id="li-comment-61772">
    <div id="comment-61772">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic4.png">     </div>
    <div class="tit"> 
	    <span class="name"> ronnie </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-15</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61772','61772', 'respond','56081' ) " href="?replytocom=61772#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor"></span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>已经OK， DC的域名实际应该为KLIST看到的KDC</p>
<div class="comment-tools">
<div class="vote" id="vote-61772"><span id="acv_stat_61772"></span><a class="ilike_icon"  id="vote4-61772" href="javascript:acv_vote(61772,1);">亮了</a>(<span id="cos_support-61772">0</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61772" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61772" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61772" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61772" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61772" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
<li class="comment byuser comment-author-jt2 even thread-odd thread-alt depth-1" id="li-comment-61788">
    <div id="comment-61788">
        <div class="photo"> <a href="http://www.freebuf.com/author/jt2">
    <img src="http://www.freebuf.com/buf/plugins/wp-user-avatar/images/wp-user-avatar-96x96.png"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/jt2" target="_blank">jt2&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(1级)</span>
				<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-15</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61788','61788', 'respond','56081' ) " href="?replytocom=61788#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">32楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>看了2天 稍懂，分析得很详细！业界良心啊</p>
<div class="comment-tools">
<div class="vote" id="vote-61788"><span id="acv_stat_61788"></span><a class="ilike_icon"  id="vote4-61788" href="javascript:acv_vote(61788,1);">亮了</a>(<span id="cos_support-61788">0</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61788" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61788" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61788" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61788" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61788" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-guies odd alt thread-even depth-1" id="li-comment-61801">
    <div id="comment-61801">
        <div class="photo"> <a href="http://www.freebuf.com/author/guies">
    <img src="http://www.freebuf.com/buf/plugins/wp-user-avatar/images/wp-user-avatar-96x96.png"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/guies" target="_blank">guies&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(1级)</span>
				<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-15</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-61801','61801', 'respond','56081' ) " href="?replytocom=61801#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">33楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>不错哦！</p>
<div class="comment-tools">
<div class="vote" id="vote-61801"><span id="acv_stat_61801"></span><a class="ilike_icon"  id="vote4-61801" href="javascript:acv_vote(61801,1);">亮了</a>(<span id="cos_support-61801">0</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="61801" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="61801" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="61801" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="61801" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="61801" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment even thread-odd thread-alt depth-1" id="li-comment-62190">
    <div id="comment-62190">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic4.png">     </div>
    <div class="tit"> 
	    <span class="name"> V </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-21</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-62190','62190', 'respond','56081' ) " href="?replytocom=62190#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">34楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>wo  jingran   TMD  yi  kou  qi  kan  wan le !</p>
<div class="comment-tools">
<div class="vote" id="vote-62190"><span id="acv_stat_62190"></span><a class="ilike_icon"  id="vote4-62190" href="javascript:acv_vote(62190,1);">亮了</a>(<span id="cos_support-62190">0</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="62190" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="62190" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="62190" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="62190" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="62190" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-kirakilla odd alt thread-even depth-1" id="li-comment-62230">
    <div id="comment-62230">
        <div class="photo"> <a href="http://www.freebuf.com/author/kirakilla">
    <img src="http://www.freebuf.com/buf/plugins/wp-user-avatar/images/wp-user-avatar-96x96.png"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/kirakilla" target="_blank">kirakilla&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(1级)</span>
				<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-21</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-62230','62230', 'respond','56081' ) " href="?replytocom=62230#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">35楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>@ walkerfuz   厉害啊！！</p>
<div class="comment-tools">
<div class="vote" id="vote-62230"><span id="acv_stat_62230"></span><a class="ilike_icon"  id="vote4-62230" href="javascript:acv_vote(62230,1);">亮了</a>(<span id="cos_support-62230">0</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="62230" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="62230" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="62230" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="62230" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="62230" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-kboron even thread-odd thread-alt depth-1" id="li-comment-62245">
    <div id="comment-62245">
        <div class="photo"> <a href="http://www.freebuf.com/author/kboron">
    <img src="http://image.3001.net/2015/01/2222.jpg"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/kboron" target="_blank">kboron&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(2级)</span>
				<span class="explain"> http://weibo.com/u/5381039840 </span>
		<span class="time">&nbsp;2015-01-21</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-62245','62245', 'respond','56081' ) " href="?replytocom=62245#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">36楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>佩服</p>
<div class="comment-tools">
<div class="vote" id="vote-62245"><span id="acv_stat_62245"></span><a class="ilike_icon"  id="vote4-62245" href="javascript:acv_vote(62245,1);">亮了</a>(<span id="cos_support-62245">0</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="62245" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="62245" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="62245" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="62245" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="62245" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment odd alt thread-even depth-1" id="li-comment-62248">
    <div id="comment-62248">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic5.png">     </div>
    <div class="tit"> 
	    <span class="name"> kxlzx </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-21</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-62248','62248', 'respond','56081' ) " href="?replytocom=62248#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">37楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>@ walkerfuz<br />
这么牛逼的人，为什么不把简历发来！我生气了！</p>
<div class="comment-tools">
<div class="vote" id="vote-62248"><span id="acv_stat_62248"></span><a class="ilike_icon"  id="vote4-62248" href="javascript:acv_vote(62248,1);">亮了</a>(<span id="cos_support-62248">0</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="62248" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="62248" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="62248" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="62248" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="62248" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-kirakilla even thread-odd thread-alt depth-1" id="li-comment-62253">
    <div id="comment-62253">
        <div class="photo"> <a href="http://www.freebuf.com/author/kirakilla">
    <img src="http://www.freebuf.com/buf/plugins/wp-user-avatar/images/wp-user-avatar-96x96.png"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/kirakilla" target="_blank">kirakilla&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(1级)</span>
				<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-21</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-62253','62253', 'respond','56081' ) " href="?replytocom=62253#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">38楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>我想问问。。这样破解了domain admin 权限后,会不会在adc的Log里面查到这些破解的信息？</p>
<div class="comment-tools">
<div class="vote" id="vote-62253"><span id="acv_stat_62253"></span><a class="ilike_icon"  id="vote4-62253" href="javascript:acv_vote(62253,1);">亮了</a>(<span id="cos_support-62253">0</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="62253" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="62253" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="62253" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="62253" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="62253" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-kirakilla odd alt thread-even depth-1" id="li-comment-62254">
    <div id="comment-62254">
        <div class="photo"> <a href="http://www.freebuf.com/author/kirakilla">
    <img src="http://www.freebuf.com/buf/plugins/wp-user-avatar/images/wp-user-avatar-96x96.png"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/kirakilla" target="_blank">kirakilla&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(1级)</span>
				<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-21</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-62254','62254', 'respond','56081' ) " href="?replytocom=62254#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">39楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>@ walkerfuz   大神,我想问问。。这样破解了domain admin 权限后,会不会在AD里面查到这些破解过程的相关log？还有利用了这个漏洞后看上去只能查看server里面的文件啊..还能拿domian admin的密码吗？</p>
<div class="comment-tools">
<div class="vote" id="vote-62254"><span id="acv_stat_62254"></span><a class="ilike_icon"  id="vote4-62254" href="javascript:acv_vote(62254,1);">亮了</a>(<span id="cos_support-62254">0</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="62254" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="62254" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="62254" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="62254" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="62254" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment even thread-odd thread-alt depth-1" id="li-comment-71488">
    <div id="comment-71488">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic18.png">     </div>
    <div class="tit"> 
	    <span class="name"> 我叫松达<span class="weibo"></span> </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-21</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-71488','71488', 'respond','56081' ) " href="?replytocom=71488#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">40楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>很不错的文章</p>
<div class="comment-tools">
<div class="vote" id="vote-71488"><span id="acv_stat_71488"></span><a class="ilike_icon"  id="vote4-71488" href="javascript:acv_vote(71488,1);">亮了</a>(<span id="cos_support-71488">0</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="71488" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="71488" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="71488" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="71488" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="71488" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment odd alt thread-even depth-1" id="li-comment-71486">
    <div id="comment-71486">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic4.png">     </div>
    <div class="tit"> 
	    <span class="name"> 疯狂树哥<span class="weibo"></span> </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-21</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-71486','71486', 'respond','56081' ) " href="?replytocom=71486#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">41楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>近期FB上非常有质量的一篇文章，推荐阅读，作者walkerfuz在漏洞分析领域有很深入的研究。<img data-original="http://timg.sjs.sinajs.cn/t3/style/images/common/face/ext/normal/6a/laugh.gif" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="哈哈" /></p>
<noscript><img src="http://timg.sjs.sinajs.cn/t3/style/images/common/face/ext/normal/6a/laugh.gif" title="哈哈" /></noscript>
<div class="comment-tools">
<div class="vote" id="vote-71486"><span id="acv_stat_71486"></span><a class="ilike_icon"  id="vote4-71486" href="javascript:acv_vote(71486,1);">亮了</a>(<span id="cos_support-71486">1</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="71486" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="71486" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="71486" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="71486" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="71486" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment even thread-odd thread-alt depth-1" id="li-comment-71487">
    <div id="comment-71487">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic8.png">     </div>
    <div class="tit"> 
	    <span class="name"> 北方cola<span class="weibo"></span> </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-21</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-71487','71487', 'respond','56081' ) " href="?replytocom=71487#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">42楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>真牛逼！</p>
<div class="comment-tools">
<div class="vote" id="vote-71487"><span id="acv_stat_71487"></span><a class="ilike_icon"  id="vote4-71487" href="javascript:acv_vote(71487,1);">亮了</a>(<span id="cos_support-71487">0</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="71487" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="71487" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="71487" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="71487" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="71487" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment odd alt thread-even depth-1" id="li-comment-71485">
    <div id="comment-71485">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic11.png">     </div>
    <div class="tit"> 
	    <span class="name"> 支付产业热点<span class="weibo"></span> </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-23</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-71485','71485', 'respond','56081' ) " href="?replytocom=71485#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">43楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>不错的内容，感谢分享 ！</p>
<div class="comment-tools">
<div class="vote" id="vote-71485"><span id="acv_stat_71485"></span><a class="ilike_icon"  id="vote4-71485" href="javascript:acv_vote(71485,1);">亮了</a>(<span id="cos_support-71485">0</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="71485" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="71485" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="71485" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="71485" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="71485" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment even thread-odd thread-alt depth-1" id="li-comment-71483">
    <div id="comment-71483">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic1.png">     </div>
    <div class="tit"> 
	    <span class="name"> Qhf1122<span class="weibo"></span> </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-24</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-71483','71483', 'respond','56081' ) " href="?replytocom=71483#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">44楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p><img src="http://timg.sjs.sinajs.cn/t3/style/images/common/face/ext/normal/b6/kbs_org.gif" title="挖鼻屎" /><img src="http://timg.sjs.sinajs.cn/t3/style/images/common/face/ext/normal/b6/kbs_org.gif" title="挖鼻屎" /><img data-original="http://timg.sjs.sinajs.cn/t3/style/images/common/face/ext/normal/b6/kbs_org.gif" src="http://www.freebuf.com/buf/themes/freebuf/images/grey.gif" title="挖鼻屎" /></p>
<noscript><img src="http://timg.sjs.sinajs.cn/t3/style/images/common/face/ext/normal/b6/kbs_org.gif" title="挖鼻屎" /><img src="http://timg.sjs.sinajs.cn/t3/style/images/common/face/ext/normal/b6/kbs_org.gif" title="挖鼻屎" /><img src="http://timg.sjs.sinajs.cn/t3/style/images/common/face/ext/normal/b6/kbs_org.gif" title="挖鼻屎" /></noscript>
<div class="comment-tools">
<div class="vote" id="vote-71483"><span id="acv_stat_71483"></span><a class="ilike_icon"  id="vote4-71483" href="javascript:acv_vote(71483,1);">亮了</a>(<span id="cos_support-71483">0</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="71483" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="71483" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="71483" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="71483" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="71483" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment odd alt thread-even depth-1" id="li-comment-71484">
    <div id="comment-71484">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic2.png">     </div>
    <div class="tit"> 
	    <span class="name"> 星空零Arrin<span class="weibo"></span> </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-24</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-71484','71484', 'respond','56081' ) " href="?replytocom=71484#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">45楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>我过去找别的基友玩的一下子忘记问你在哪了qwq你也不知道我长啥样</p>
<div class="comment-tools">
<div class="vote" id="vote-71484"><span id="acv_stat_71484"></span><a class="ilike_icon"  id="vote4-71484" href="javascript:acv_vote(71484,1);">亮了</a>(<span id="cos_support-71484">0</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="71484" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="71484" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="71484" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="71484" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="71484" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment even thread-odd thread-alt depth-1" id="li-comment-71482">
    <div id="comment-71482">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic11.png">     </div>
    <div class="tit"> 
	    <span class="name"> 掌心里的海_眼角里的云<span class="weibo"></span> </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-24</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-71482','71482', 'respond','56081' ) " href="?replytocom=71482#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">46楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>你想表达什么</p>
<div class="comment-tools">
<div class="vote" id="vote-71482"><span id="acv_stat_71482"></span><a class="ilike_icon"  id="vote4-71482" href="javascript:acv_vote(71482,1);">亮了</a>(<span id="cos_support-71482">0</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="71482" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="71482" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="71482" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="71482" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="71482" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment odd alt thread-even depth-1" id="li-comment-71481">
    <div id="comment-71481">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic8.png">     </div>
    <div class="tit"> 
	    <span class="name"> Qhf1122<span class="weibo"></span> </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-24</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-71481','71481', 'respond','56081' ) " href="?replytocom=71481#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">47楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>那你想表达什么</p>
<div class="comment-tools">
<div class="vote" id="vote-71481"><span id="acv_stat_71481"></span><a class="ilike_icon"  id="vote4-71481" href="javascript:acv_vote(71481,1);">亮了</a>(<span id="cos_support-71481">0</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="71481" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="71481" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="71481" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="71481" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="71481" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment even thread-odd thread-alt depth-1" id="li-comment-71480">
    <div id="comment-71480">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic15.png">     </div>
    <div class="tit"> 
	    <span class="name"> 掌心里的海_眼角里的云<span class="weibo"></span> </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-24</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-71480','71480', 'respond','56081' ) " href="?replytocom=71480#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">48楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>分享知识  该你了</p>
<div class="comment-tools">
<div class="vote" id="vote-71480"><span id="acv_stat_71480"></span><a class="ilike_icon"  id="vote4-71480" href="javascript:acv_vote(71480,1);">亮了</a>(<span id="cos_support-71480">0</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="71480" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="71480" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="71480" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="71480" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="71480" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment byuser comment-author-lyplwz odd alt thread-even depth-1" id="li-comment-62946">
    <div id="comment-62946">
        <div class="photo"> <a href="http://www.freebuf.com/author/lyplwz">
    <img src="http://www.freebuf.com/buf/plugins/wp-user-avatar/images/wp-user-avatar-96x96.png"></a>
     </div>
    <div class="tit"> 
	    <span class="name"> <a href="http://www.freebuf.com/author/lyplwz" target="_blank">lyplwz&nbsp;</a>  </span>
        		
		<span class="icon-f"> </span>
		<span class="rank">(1级)</span>
				<span class="explain">  </span>
		<span class="time">&nbsp;2015-01-28</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-62946','62946', 'respond','56081' ) " href="?replytocom=62946#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">49楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>牛逼 ，我等只有捧场凑热闹的份。</p>
<div class="comment-tools">
<div class="vote" id="vote-62946"><span id="acv_stat_62946"></span><a class="ilike_icon"  id="vote4-62946" href="javascript:acv_vote(62946,1);">亮了</a>(<span id="cos_support-62946">0</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="62946" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="62946" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="62946" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="62946" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="62946" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
<li class="comment even thread-odd thread-alt depth-1" id="li-comment-63301">
    <div id="comment-63301">
        <div class="photo">     <img src="http://image.3001.net/images/headimg/pic15.png">     </div>
    <div class="tit"> 
	    <span class="name"> newday </span>
        		<span class="explain">  </span>
		<span class="time">&nbsp;2015-02-01</span>
		<span class="time">
                    </span>
        <span class="useragent_output_custom"></span>
        <span class="useragent_output_custom"></span> 
		<span class="reply">
		        <!-- 正常情况 -->
           <a onclick="return addComment.moveForm( 'comment-63301','63301', 'respond','56081' ) " href="?replytocom=63301#respond" class="comment-reply-link" rel="nofollow">回复</a>
        	    </span>
		<span class="floor">50楼</span>
	</div>
	    <div class="txt">
	  <p class="useragent_output_custom"></p>
      <p>@walkerfuz<br />
在文章中说道：“为了使得KDC能够解密获取被加密在REQ_BODY中的PAC信息，也一并把这个生成的subkey随机数放在TGS_REQ数据包中的Authenticator发给了KDC服务器。”  这样说的依据咋哪儿？<br />
我用wireshark抓取过TGS_req的数据包，在数据包中好像并没有直接看到相关的数据，是做了变换处理后看不到了么？</p>
<div class="comment-tools">
<div class="vote" id="vote-63301"><span id="acv_stat_63301"></span><a class="ilike_icon"  id="vote4-63301" href="javascript:acv_vote(63301,1);">亮了</a>(<span id="cos_support-63301">0</span>)</div>
<div class="dropup"><a class="dropdown-toggle btn-report" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="display:none;"> 举报</a>
<ul class="dropdown-menu" style="display:none;bottom:auto;">
<li><a data-id="63301" class="click_report" href="javascript:;">广告等垃圾信息</a></li>
<li><a data-id="63301" class="click_report" href="javascript:;">不友善内容</a></li>
<li><a data-id="63301" class="click_report" href="javascript:;">违反法律法规的内容</a></li>
<li><a data-id="63301" class="click_report" href="javascript:;">不宜公开讨论的政治内容</a></li>
<li><a data-id="63301" class="click_report" href="javascript:;">其他</a></li>
</ul></div>
</div>
	</div></div>
</li><!-- #comment-## -->
      </ul>
      <div class="commentnav page01" style="padding-top:10px; text-align: center;">
         <span class='page-numbers current'>1</span>
<a class='page-numbers' href='http://www.freebuf.com/vuls/56081.html/comment-page-2#comments'>2</a>
<a class="next page-numbers" href="http://www.freebuf.com/vuls/56081.html/comment-page-2#comments">下一页</a>      </div>
	  
<script src="http://www.freebuf.com/buf/themes/freebuf/js/ajaxfileupload.js" type="text/javascript"></script>
<div id="respond" class="comment-box">
<input type="file" id="uploadUnit" name="upfile" class="hidden" value="">
    <form action="http://www.freebuf.com/wp-comments-post.php" method="post" id="commentform">
        <div id="comment-author-info">
	    <div class="login-other">
		  <div class="login_button login_icon_sina" title="使用新浪微博登陆" onclick="login_button_click('sina')"></div>
          <div class="login_button login_icon_qq" title="使用腾讯QQ登陆" onclick="login_button_click('qq')"></div></div>
        <div class="login-input">
	    <p><label for="author">昵称</label>
		          <input type="text" name="author" id="author" value="" size="14" tabindex="1" aria-required='true' placeholder = "请输入昵称" required />
        </p><span>必须</span><span>您当前尚未登录。<a  class="simplemodal-login" href="http://www.freebuf.com/oauth" title="登陆">登陆？</a><a  href="https://account.tophant.com/register.html" target="_blank">注册</a></span></div>
		<div class="login-input">
		  <p><label for="email">邮箱</label><input type="text" name="email" id="email" value="" size="25" tabindex="2" aria-required='true' placeholder = "请输入邮箱地址" required /></p>
		<span>必须（保密）</span>
		</div>
    </div>

        <div id="test" class="post-area">
      <div class="holiday"></div>
	    <div class="comment-editor">
			<a id="comment-smiley" href="javascript:;">表情</a><a href="javascript:;" id="imageThumb">插图</a>
	    </div>
        <div id="smileys" >
           <a title="mrgreen" href="javascript:grin(':mrgreen:')"><img src="http://image.3001.net/images/index/smilies/icon_mrgreen.gif" /></a><a title="razz" href="javascript:grin(':razz:')"><img src="http://image.3001.net/images/index/smilies/icon_razz.gif" /></a><a title="sad" href="javascript:grin(':sad:')"><img src="http://image.3001.net/images/index/smilies/icon_sad.gif" /></a><a title="smile" href="javascript:grin(':smile:')"><img src="http://image.3001.net/images/index/smilies/icon_smile.gif" /></a><a title="oops" href="javascript:grin(':oops:')"><img src="http://image.3001.net/images/index/smilies/icon_redface.gif" /></a><a title="grin" href="javascript:grin(':grin:')"><img src="http://image.3001.net/images/index/smilies/icon_biggrin.gif" /></a><a title="eek" href="javascript:grin(':eek:')"><img src="http://image.3001.net/images/index/smilies/icon_surprised.gif" /></a><a title="???" href="javascript:grin(':???:')"><img src="http://image.3001.net/images/index/smilies/icon_confused.gif" /></a><a title="cool" href="javascript:grin(':cool:')"><img src="http://image.3001.net/images/index/smilies/icon_cool.gif" /></a><a title="lol" href="javascript:grin(':lol:')"><img src="http://image.3001.net/images/index/smilies/icon_lol.gif" /></a><a title="mad" href="javascript:grin(':mad:')"><img src="http://image.3001.net/images/index/smilies/icon_mad.gif" /></a><a title="twisted" href="javascript:grin(':twisted:')"><img src="http://image.3001.net/images/index/smilies/icon_twisted.gif" /></a><a title="roll" href="javascript:grin(':roll:')"><img src="http://image.3001.net/images/index/smilies/icon_rolleyes.gif" /></a><a title="wink" href="javascript:grin(':wink:')"><img src="http://image.3001.net/images/index/smilies/icon_wink.gif" /></a><a title="idea" href="javascript:grin(':idea:')"><img src="http://image.3001.net/images/index/smilies/icon_idea.gif" /></a><a title="arrow" href="javascript:grin(':arrow:')"><img src="http://image.3001.net/images/index/smilies/icon_arrow.gif" /></a><a title="neutral" href="javascript:grin(':neutral:')"><img src="http://image.3001.net/images/index/smilies/icon_neutral.gif" /></a><a title="cry" href="javascript:grin(':cry:')"><img src="http://image.3001.net/images/index/smilies/icon_cry.gif" /></a><a title="?" href="javascript:grin(':?:')"><img src="http://image.3001.net/images/index/smilies/icon_question.gif" /></a><a title="evil" href="javascript:grin(':evil:')"><img src="http://image.3001.net/images/index/smilies/icon_evil.gif" /></a><a title="shock" href="javascript:grin(':shock:')"><img src="http://image.3001.net/images/index/smilies/icon_eek.gif" /></a><a title="!" href="javascript:grin(':!:')"><img src="http://image.3001.net/images/index/smilies/icon_exclaim.gif" /></a>        </div>
         <textarea name="comment" id="comment" cols="100%" rows="7" tabindex="4" style="overflow-x:hidden; overflow-y:hidden; border:0; width:100%;" onkeydown="if(event.ctrlKey&amp;&amp;event.keyCode==13){document.getElementById('submit').click();return false};"></textarea>
    </div>
      <div class="subcon but">
      <input class="btn btn-success" type="submit" name="submit" id="submit" tabindex="5" value="提交评论(Ctrl+Enter)" />
      <a rel="nofollow" class="btn btn-default" id="cancel-comment-reply-link" href="javascript:;">取消</a>
      <div class="checkbox"><input type='hidden' name='comment_post_ID' value='56081' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
<label for="comment_mail_notify" class="comment_mail"><input type="checkbox" name="comment_mail_notify" id="comment_mail_notify" value="comment_mail_notify" checked="checked"/>有人回复时邮件通知我</label></div>
      </div>
    <input name="Token" id="Token" type="hidden" value="avcfs4" />
  </form>
  </div>
</div>	  
<div class="commentshow">
<div class="comments-loading">Loading...</div>
</div>
<script language="javascript">
jQuery(document).ready(function($){ //Begin jQuery
    $('.reply').click(function() {
    var atid = '"#' + $(this).parent().attr("id") + '"';
    var atname = $(this).parent().find('span:first').text();
    $("#comment").val("@" + atname + " ").focus();
});
    $('.cancel-comment-reply a').click(function() { //点击取消回复评论清空评论框的内容
    $("#comment").val('');
});
}) 

jQuery(document).ready(function($) {
    $body = (window.opera) ? (document.compatMode == "CSS1Compat" ? $('html') : $('body')) : $('html,body');//commentnav ajax
    $(document).on('click', '.commentnav a', function(e) {
        e.preventDefault();
        $.ajax({
            type: "GET",
            url: $(this).attr('href'),
            beforeSend: function() {
                $('.commentnav').remove();
                $('.comment-list').remove();
                $('.comments-loading').slideDown();
            },
            dataType: "html",
            success: function(out) {
                result = $(out).find('.comment-list');
                nextlink = $(out).find('.commentnav');
                $('.comments-loading').slideUp(550);
                $('.comments-loading').after(result.fadeIn(800));
                $(".comment-list img").each(function(){
                  var url = $(this).attr("data-original");
                  $(this).attr("src",url);
                })
            }
        });
    });    
});
</script>            </div>
                    <div class="col-md-3 visible-md-block visible-lg-block">
                <div class="panel panel-default">
                    <div class="author-top">
                         <div class="author-wrap">
                            <div class="author-header"><img src="http://image.3001.net/2015/01/redhat.png" width="96" height="96" alt="walkerfuz" class="avatar avatar-100 wp-user-avatar wp-user-avatar-100 photo" />                            </div>
                            <p class="name"><a href="http://www.freebuf.com/author/walkerfuz" title="由 walkerfuz 发布" rel="author">walkerfuz</a><span><a href="http://zhuanlan.freebuf.com" target="_blank"><img src="http://image.3001.net/images/index/column-iden.png" title="专栏作者"></a></span></p>
                            <p class="signature">像风一样分析漏洞、挖漏洞的男子™</p>
                            <p class="art-com clearfix">
                                <span class="aut-article">
                                    <a href="/author/walkerfuz"target="_blank">
                                        <i>7</i>
                                        <i>文章数</i>
                                    </a>
                                </span>
                                <span class="aut-comment">
                                    <a href="/author/walkerfuz?comment=1" target="_blank">
                                        <i>21</i>
                                        <i>评论数</i>
                                    </a>
                                </span>
                            </p>
                        </div>
                    </div>
                    <div class="author-bottom">
                        <div class="author-wrap">
                            <h3 class="last-title">最近文章</h3>
                            <div class="last-item-wrap">
                                                                        <div class="last-item">
                                            <a href="http://www.freebuf.com/articles/system/139481.html" target="_blank"><span class="point"></span>利用MS17-010补丁对比发现的九个漏洞</a>
                                            <p class="last-time">2017.07.10</p>
                                        </div>
                                                                            <div class="last-item">
                                            <a href="http://www.freebuf.com/vuls/126892.html" target="_blank"><span class="point"></span>暴风影音AviIndexChunk字段堆溢出漏洞分析实战</a>
                                            <p class="last-time">2017.02.17</p>
                                        </div>
                                                                            <div class="last-item">
                                            <a href="http://www.freebuf.com/articles/web/105510.html" target="_blank"><span class="point"></span>从零开始学Fuzzing系列：带领nduja突破Grinder的壁垒</a>
                                            <p class="last-time">2016.05.28</p>
                                        </div>
                                                                </div>
                        </div>

                        <div class="more-wrap">
                            <a href="http://www.freebuf.com/author/walkerfuz" target="_blank" class="btn-new">浏览更多</a>
                        </div>
                    </div>
                </div>
                                <div class="panel panel-default">
                    <div class="read visible-md-block visible-lg-block">
                        <div class="main-tit02">
                            <h3>相关阅读</h3>
                        </div>
                        <ul>
  <li><a href="http://www.freebuf.com/articles/system/89652.html" target="_blank">“极具破坏性”的Kerberos协议漏洞，可导致系统完全被控制</a></li>
  
  <li><a href="http://www.freebuf.com/news/140647.html" target="_blank">以“催眠”绕过认证：一个影响Kerberos协议长达20年的漏洞</a></li>
  
  <li><a href="http://www.freebuf.com/articles/terminal/80186.html" target="_blank">刨根问底：Hash传递攻击原理探究</a></li>
  </ul><ul>
  <li><a href="http://www.freebuf.com/articles/system/6157.html" target="_blank" title=OSSEC系列二&#8212;&#8212;编写自己的DECODE（初级）>OSSEC系列二&#8212;&#8212;编写自己的DECODE（初级）</a></li>
  
  <li><a href="http://www.freebuf.com/articles/system/20077.html" target="_blank" title=2013黑帽大会：失控 &#8211; 针对工业SCADA系统的漏洞利用（一）>2013黑帽大会：失控 &#8211; 针对工业SCADA系统的漏洞利用（一）</a></li>
  </ul>                    </div>
                </div>
                <!--<div class="ad-wrap"><a href="http://www.ijiami.cn/?freebuf.com" target="_blank"><img width="100%" src="http://image.3001.net/images/20141201/14174039186901.jpg"></a></div>-->
                <div class="panel panel-default rec-spe">
                    <div class="main-tit03 colour-blue">
                        <h3>特别推荐</h3>
                    </div>
                                                    <div class="rec-img"><a href="http://www.freebuf.com/ad?id=3" target="_blank"><img
                                            src="http://image.3001.net/2017/05/14a10c5c919d154dddbee79e3a944143-220x150.png" width="220"></a></div>
                                                </div>
                <div id="mar-right">
                    <!--<div class="read visible-lg-block">
        <div class="main-tit04">
          <h3>商城新品</h3>
        </div>
        <div id="slider" class="nivoSlider">  </div>
      </div>-->
                    <div class="panel panel-default code"><img src="http://image.3001.net/images/new/code.jpg" width="192"
                                                               height="192">
                        <p>关注我们 分享每日精选文章</p>
                    </div>
                </div>
            </div>
                </div>
                    <div class="row marvellous visible-lg-block">
                <h3>不容错过</h3>
                <ul>
                                                <li><a href="http://www.freebuf.com/video/108169.html" rel="bookmark"
                                   title="一周「BUF大事件」（20160625-20160701）">一周「BUF大事件」（20160625-20160701）</a>
                                <p>                                        <span class="name"><a href="http://www.freebuf.com/author/supercoco" title="由 supercoco 发布" rel="author">supercoco</a></span>
                                                                        <span class="time">2016-07-02</span></p>
                            </li>
                                                    <li><a href="http://www.freebuf.com/articles/web/133306.html" rel="bookmark"
                                   title="游戏外挂网站暗藏病毒：盗号、锁首等数种危害并举">游戏外挂网站暗藏病毒：盗号、锁首等数种危害并举</a>
                                <p>                                        <span class="name"><a href="http://www.freebuf.com/author/%e7%81%ab%e7%bb%92%e5%ae%89%e5%85%a8" title="由 火绒安全 发布" rel="author">火绒安全</a></span>
                                                                        <span class="time">2017-05-02</span></p>
                            </li>
                                                    <li><a href="http://www.freebuf.com/news/145583.html" rel="bookmark"
                                   title="CIA 对本国情报机构下手？利用ExpressLane工具搜集FBI与NSA等机构的数据">CIA 对本国情报机构下手？利用ExpressLane工具搜集FBI与NSA等机构的数据</a>
                                <p>                                        <span class="name"><a href="http://www.freebuf.com/author/angelay" title="由 AngelaY 发布" rel="author">AngelaY</a></span>
                                                                        <span class="time">2017-08-25</span></p>
                            </li>
                                                    <li><a href="http://www.freebuf.com/news/120128.html" rel="bookmark"
                                   title="WiFi信号干扰可以泄漏你的密码和敏感信息">WiFi信号干扰可以泄漏你的密码和敏感信息</a>
                                <p>                                        <span class="name"><a href="http://www.freebuf.com/author/%e7%b1%b3%e9%9b%aa%e5%84%bf" title="由 米雪儿 发布" rel="author">米雪儿</a></span>
                                                                        <span class="time">2016-12-02</span></p>
                            </li>
                                                            </ul>
            </div>
            </div>
</div>
<script type="text/javascript">
  $(window).load(function() {
    $('#slider').nivoSlider();
  });
  $('#contenttxt img').removeAttr('height');
  $('#contenttxt img').wrap(function(){
    if(!$(this).parent().attr('href')){
      var imgurl = $(this).attr('data-original');
      if(imgurl.substr(-6)=='!small'){
        imgurl = imgurl.substring(0,imgurl.length-6);
      }
      return '<a href="' + imgurl + '" class="highslide-image" onclick="return hs.expand(this);" target="_blank"></a>';
    }
  })
</script>
<script src="http://www.freebuf.com/buf/themes/freebuf/js/comments-ajax.js" type="text/javascript"></script>
<script type="text/javascript" src="http://static.3001.net/js/focus/jquery.nivo.slider.pack.js"></script>
<!----------footer---------->
<div class="footer">
  <div class="container">
    <div class="footer-list ">
      <h3>FREEBUF</h3>
      <ul>
        <li><a href="http://www.freebuf.com/dis">免责声明</a></li>
        <li><a href="http://www.freebuf.com/news/others/864.html">关于我们</a></li>
        <li><a href="http://www.freebuf.com/jobs/40386.html">加入我们</a></li>
      </ul>
    </div>
    <div class="footer-list ">
      <h3>广告及服务</h3>
      <ul>
        <li><a target="_blank" href="mailto:root@freebuf.com">寻求报道</a></li>
        <li><a href="http://www.freebuf.com/advertise">广告合作</a></li>
        <li><a target="_blank" href="mailto:help@freebuf.com">联系我们</a></li>
        <li><a href="http://www.freebuf.com/friends">友情链接</a></li>
      </ul>
    </div>
    <div class="footer-list ">
      <h3>关注我们</h3>
      <ul>
        <li><div class="weixin-pannel weixin"><a class="qr" href="javascript:viod(0);"><span class="g-icon-qr1">官方微信</span><i></i></a></div></li>
        <li><a rel="nofollow" target="_blank" href="http://weibo.com/freebuf">新浪微博</a></li>
        <li><a rel="nofollow" target="_blank" href="http://t.qq.com/freebuf">腾讯微博</a></li>
        <li><a rel="nofollow" target="_blank" href="http://twitter.com/freebuf">Twitter</a></li>
      </ul>
    </div>
    <div class="footer-list ">
      <h3>赞助商</h3>
      <ul>
        <li style="padding:6px 0 10px;"><a rel="nofollow" target="_blank" href="http://www.aliyun.com/?freebuf"><img src="http://image.3001.net/images/ad/ali.png"></a></li>
        <li><a rel="nofollow" target="_blank" href="http://www.upyun.com/?freebuf"><img src="http://image.3001.net/images/ad/upyun.png"></a></li>
        <li style="padding:6px 0 10px;"><a rel="nofollow" target="_blank" href="https://www.trustasia.com/?freebuf"><img src="http://image.3001.net/images/ad/ad-yzcx.png"></a></li>
      </ul>
    </div>
    <div class="footer-list ">
      <ul>
      </ul>
    </div>
    <div class="footer-logo  pull-right"><img src="http://image.3001.net/images/index/freebufrobot_shendanjie.png" ></div>
  </div>
  <div class="copyright"><div class="container"><p>Copyright &copy; 2017 WWW.FREEBUF.COM All Rights Reserved <a rel="nofollow" target="_blank" href="http://www.miitbeian.gov.cn">沪ICP备13033796号</a></p><span><a rel="nofollow" target="_blank" href="http://click.aliyun.com/m/1336/?freebuf"><img src="http://image.3001.net/images/new/icon-aly.png"></a></span></div></div>
</div>
<div class="bottom_tools"><a id="scrollUp" href="javascript:;" title="飞回顶部"></a></div>
<!----------footer end----------> 
<script src="http://static.3001.net/js/new/backtop.js"></script>
<script type="text/javascript">
jQuery(function(){	
	jQuery('.tabPanes ul li').click(function(){
		jQuery(this).addClass('hit').siblings().removeClass('hit');
		jQuery('.panesl>div:eq('+jQuery(this).index()+')').show().siblings().hide();	
	})
	jQuery('.vulbox-nav').click(function(e) { 
        e.stopPropagation(); 
    });  
})
</script>
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fcc53db168808048541c6735ce30421f5' type='text/javascript'%3E%3C/script%3E"));
</script>
<img alt='css.php' src="http://www.freebuf.com/buf/plugins/cc/css.php?k=3cb185a485c81b23211eb80b75a406fd&amp;o=i&amp;t=343399838" width='1' height='1' /><script type="text/javascript">
jQuery(function() {
    jQuery(".simditor pre").each(function(i, block){
        hljs.highlightBlock(block);    
    });
    hljs.initHighlightingOnLoad();
});
</script>
<script>
/* <![CDATA[ */
var rcGlobal = {
	serverUrl		:'http://www.freebuf.com',
	infoTemp		:'%REVIEWER% on %POST%',
	loadingText		:'Loading',
	noCommentsText	:'No comments',
	newestText		:'&laquo; 最新',
	newerText		:'&laquo; 新一点',
	olderText		:'旧一点 &raquo;',
	showContent		:'1',
	external		:'1',
	avatarSize		:'32',
	avatarPosition	:'left',
	anonymous		:'Anonymous'
};
/* ]]> */
</script>
<script type='text/javascript' src='http://static.3001.net/js/recentcomments/wp-recentcomments-jquery.js?ver=2.2.3'></script>
</body>
</html>
